var contentScript=function(e){"use strict";Object.assign;function t(e,t,n,r){return new(n||(n=Promise))(function(s,i){function o(e){try{a(r.next(e))}catch(e){i(e)}}function l(e){try{a(r.throw(e))}catch(e){i(e)}}function a(e){e.done?s(e.value):new n(function(t){t(e.value)}).then(o,l)}a((r=r.apply(e,t)).next())})}class n{static log(...e){window.__env}}function r(e){return(...t)=>new Promise((n,r)=>e(...t,e=>n(e)))}class s{constructor(e){e&&(this.queryTabs=e.tabs&&r(e.tabs.query),this.sendMessageToTabRaw=e.tabs&&r(e.tabs.sendMessage),this.sendMessageToBackgroundRaw=e.runtime&&r(e.runtime.sendMessage),this.getFromLocalStore=e.storage&&r(e.storage.local.get))}sendMessageToBackground(e){return t(this,void 0,void 0,function*(){if(!this.sendMessageToBackgroundRaw)throw new Error("sendMessageToBackground is not available in this context");return n.log("[cau] send message to background",e),yield this.sendMessageToBackgroundRaw(e)})}sendMessageToTab(e,r){return t(this,void 0,void 0,function*(){if(!this.sendMessageToTabRaw)throw new Error("sendMessageToTab is not available in this context");return n.log("[cau] send message to tab",e,r),yield this.sendMessageToTabRaw(e,r)})}getCurrentTab(){return t(this,void 0,void 0,function*(){if(!this.queryTabs)throw new Error("getCurrentTab is not available in this context");const e=yield this.queryTabs({active:!0,currentWindow:!0});if(e&&1===e.length&&e[0]&&e[0].id)return e[0].id;throw new Error(`failed to identify current tab, got: ${e}`)})}getMainConfig(){return t(this,void 0,void 0,function*(){if(!this.getFromLocalStore)throw new Error("getMainConfig is not available in this context");const e=yield this.getFromLocalStore();return e&&(e.mainConfig||{})})}}class i{constructor(e){this.chromeApi=e,this.registeredHandlers=[]}listenToBackgroundRequests(e,t){if(n.log("[bh] register bg request listener",e),!this.chromeApi||!this.chromeApi.runtime||!this.chromeApi.runtime.onMessage)return;const r=(r,s,i)=>{if(r.msg===e){n.log("[bh] received known message in content script",r);const e=t(r);if(e&&"function"==typeof e.then)return e.then(i),!0;i(e)}else n.log("[bh] received unknown message in content script",r)};this.chromeApi.runtime.onMessage.addListener(r),this.registeredHandlers.push(r)}removeAllListeners(){this.registeredHandlers.forEach(e=>this.chromeApi.runtime.onMessage.removeListener(e))}}var o=new class{constructor(){this.registeredHandlers=[]}addWindowEventListener(e,t,n){window.addEventListener(e,t,n),this.registeredHandlers.push({type:e,listener:t,useCapture:n})}removeAll(){this.registeredHandlers.forEach(e=>window.removeEventListener(e.type,e.listener,e.useCapture))}};const l="name";class a{getName(e){return e.attributes&&void 0!==e.attributes[l]&&""!==e.attributes[l].value.trim()?e.attributes[l].value.trim():null}}class u{getName(e){return e.id?e.id:null}}const c="alt";class f{getName(e){return void 0!==e.attributes[c]?e.attributes[c].value:null}}class h{getName(e){if(void 0!==e.src&&""!==e.src.trim()){const t=e.src;return t.substring(t.lastIndexOf("/")+1)}if(void 0!==e.href&&void 0!==e.href.baseVal&&""!==e.href.baseVal.trim()){const t=e.href.baseVal;return t.substring(t.lastIndexOf("/")+1)}return null}}class d{getName(e){return""!==e.title.trim()?e.title:null}}class g{getName(e){if("IMG"!==e.tagName)return null;const t=[new d,new f,new h];let n=null;for(const r of t)if(null!==(n=r.getName(e)))break;return n}}class m{getName(e){return e.hasChildNodes()&&e.firstChild.nodeType===Node.TEXT_NODE?e.firstChild.textContent:null}}class p{getName(e){if("A"!==e.tagName)return null;const t=[new m,new d,new f];let n=null;for(const r of t)if(null!==(n=r.getName(e)))break;return null===n&&e.hasChildNodes()&&"IMG"===e.firstChild.tagName&&(n=(new g).getName(e.firstChild)),n}}class w{getName(e){if(e&&e.textContent&&""!==e.textContent.trim()){let t=e.textContent.trim().replace(/\n/g," ");return(t=e.textContent.match(/[\u3400-\u9FBF]/)?(t=t.replace(/^(.{10}[^\s]*).*/,"$1")).substr(0,t.length>10?t.lastIndexOf(" "):t.length):(t=t.replace(/^(.{25}[^\s]*).*/,"$1")).substr(0,t.length>25?t.lastIndexOf(" "):t.length)).replace(/\W/g,"_")}return null}}let b=["H1","H2","H3","H4","H5","H6"];class v{getName(e){if(-1===b.indexOf(e.tagName))return null;const t=[new w];let n=null;for(const r of t)if(null!==(n=r.getName(e)))break;return n}}class y{getName(e){if(e.hasChildNodes()){let t=null;for(const n of b){const r=e.querySelector(n);if(r){t=r;break}}if(t)return(new w).getName(t)}return null}}class S{getName(e){if("ARTICLE"!==e.tagName)return null;const t=[new y];let n=null;for(const r of t)if(null!==(n=r.getName(e)))break;return n}}class N{getName(e){if("SECTION"!==e.tagName)return null;const t=[new y];let n=null;for(const r of t)if(null!==(n=r.getName(e)))break;return n}}class x{getName(e){if("HEADER"!==e.tagName)return null;const t=[new y];let n=null;for(const r of t)if(null!==(n=r.getName(e)))break;return n}}class A{getName(e){if("LABEL"!==e.tagName)return null;const t=[new m];let n=null;for(const r of t)if(null!==(n=r.getName(e)))break;return n}}class E{getName(e){if("DIV"!==e.tagName)return null;const t=[new w];let n=null;for(const r of t)if(null!==(n=r.getName(e)))break;return n}}let C=["UL","OL","LI","DL","DT","DD"];class O{getName(e){if(-1===C.indexOf(e.tagName))return null;const t=[new w];let n=null;for(const r of t)if(null!==(n=r.getName(e)))break;return n}}class T{getName(e){if("FIGCAPTION"!==e.tagName)return null;const t=[new w];let n=null;for(const r of t)if(null!==(n=r.getName(e)))break;return n}}class k{getName(e){if("FIGURE"!==e.tagName)return null;let t=null;const n=e.querySelector("figcaption");n&&(t=(new T).getName(n));const r=e.querySelector("img");return null===t&&r&&(t=(new g).getName(r)),t}}class I{getName(e){if(e.id){const t=window.parent.document.querySelector(`label[for="${e.id}"]`);if(t)return t.textContent}return null}}const D="placeholder";class P{getName(e){return void 0!==e.attributes[D]?e.attributes[D].value:null}}class L{getName(e){return e.previousSibling&&1!==e.previousSibling.nodeType?this.getName(e.previousSibling):e.previousSibling&&"LABEL"===e.previousSibling.tagName.toUpperCase()?e.previousSibling.textContent:null}}class q{getName(e){return e.previousSibling&&3===e.previousSibling.nodeType&&""!==e.previousSibling.textContent.trim()?e.previousSibling.textContent.trim().replace(new RegExp(":$"),""):null}}class V{getName(e){if("INPUT"!==e.tagName)return null;const t=[new I,new L,new q,new P];let n=null;for(const r of t)if(null!==(n=r.getName(e)))break;return n}}class M{getName(e){if("TEXTAREA"!==e.tagName)return null;const t=[new I,new L,new q];let n=null;for(const r of t)if(null!==(n=r.getName(e)))break;return n}}class j{getName(e){if("SELECT"!==e.tagName)return null;const t=[new I,new L,new q];let n=null;for(const r of t)if(null!==(n=r.getName(e)))break;return n}}const R="label";class U{getName(e){return void 0!==e.attributes[R]&&""!==e.attributes[R].value.trim()?e.attributes[R].value.trim():null}}class F{getName(e){if("OPTGROUP"!==e.tagName)return null;let t=(new U).getName(e);return null===t&&"SELECT"===e.parentElement.tagName&&(t=(new j).getName(e.parentElement)),t}}const _="value";class B{getName(e){return void 0!==e.attributes[_]&&""!==e.attributes[_].value.trim()?e.attributes[_].value.trim():null}}class H{getName(e){if("OPTION"!==e.tagName)return null;let t=null;null===t&&"OPTGROUP"===e.parentElement.tagName&&(t=(new F).getName(e.parentElement)),null===t&&"SELECT"===e.parentElement.tagName&&(t=(new j).getName(e.parentElement));let n=(new w).getName(e);return null===n&&(n=(new B).getName(e)),null===t?t=n:t+=" -> "+(n||"Unnamed <OPTION>"),t}}class G{getName(e){if(!(e instanceof SVGElement)&&"IMAGE"!==e.tagName.toUpperCase())return null;const t=[new h];let n=null;for(const r of t)if(null!==(n=r.getName(e)))break;return n}}class ${static guessNameForElement(e){if(!e)return null;let t=[];"A"===e.tagName?t=[new p]:"IMG"===e.tagName?t=[new g]:"IMAGE"===e.tagName?t=[new G]:"ARTICLE"===e.tagName?t=[new S]:"SECTION"===e.tagName?t=[new N]:"HEADER"===e.tagName?t=[new x]:b.indexOf(e.tagName)>-1?t=[new v]:"LABEL"===e.tagName?t=[new A]:"DIV"===e.tagName?t=[new E]:C.indexOf(e.tagName)>-1?t=[new O]:"FIGCAPTION"===e.tagName?t=[new T]:"FIGURE"===e.tagName?t=[new k]:"INPUT"===e.tagName?t=[new V]:"TEXTAREA"===e.tagName?t=[new M]:"SELECT"===e.tagName?t=[new j]:"OPTGROUP"===e.tagName?t=[new F]:"OPTION"===e.tagName&&(t=[new H]),t.push(new a),t.push(new u);const n=t.map(t=>t.getName(e)).find(e=>!!(e&&e.trim().length>0))||void 0;return n&&n.trim()?n.trim().replace(/\W+/g,"_"):e.textContent&&(new w).getName(e)||"Unnamed"}}class W{constructor(){this.selectorName="css"}apply(e,t,n){return n?[(e||document).querySelector(t)]:Array.from((e||document).querySelectorAll(t))}isValidSelector(e){try{return document.querySelector("fakeprefix>"+e),!0}catch(e){return!1}}}class z{constructor(){this.selectorName="link-text"}apply(e,t,n){return Z(e,t,n,!1)}isValidSelector(e){return!!e}}function Z(e,t,n,r){const s=[];t=t.trim();for(const n of Array.from(e.getElementsByTagName("a"))){const e=X(n);(r&&e.indexOf(t)>=0||!r&&e===t)&&s.push(n)}return s}function X(e){if("A"!==e.tagName)return"";let t=e.innerText||e.textContent||"";t=(t=(t=(t=t.replace(/[\u200b\u200e\u200f]/g,"")).replace(/(\r\n|\r|\n)/g,"\n")).replace(/\n/g," ")).replace(/[\ \f\t\v\u2028\u2029]+/g," ");const n=window.getComputedStyle(e).textTransform;return"capitalize"===n?t=t.replace(/(^|\s)(\S)/g,(e,...t)=>t[0]+t[1].toUpperCase()):"uppercase"===n?t=t.toUpperCase():"lowercase"===n&&(t=t.toLowerCase()),t.trim().replace(/\xa0/g," ")}var Q;!function(e){e[e.Static=1]="Static",e[e.Dynamic=2]="Dynamic",e[e.Unknown=3]="Unknown"}(Q||(Q={}));class J{constructor(e,t,n){this.value=e,this.labeledType=t,this.classifiedType=n}toString(){return"{value='"+this.value+"' label='"+this.labeledType+"' class='"+this.classifiedType+"'}"}}class K{constructor(e){this.classString=e,this.staticCount=0,this.dynamicCount=0,this.sepCount=0,this.items=[]}extractValue(e){if(!this.regex)throw new Error("'regex' needs to be initialized first");const t=this.regex.exec(e);return t?t.slice(1).join("-"):""}isDynamic(){const e=1===this.items.length,t=this.items.length>1&&this.dynamicCount>0,n=e&&this.dynamicCount>this.staticCount/2,r=e&&this.dynamicCount>0&&this.sepCount>=6&&this.classString.length>=40,s=e&&this.dynamicCount>=2;return t||n||r||s}toString(){return JSON.stringify(this)}}const Y=["-","_",":",";",".","/","|"," ","[","]","{","}","(",")","+","?","!"];class ee{constructor(){this.dynamicity=0,this.staticValues=[],this.dynamicValues=[]}}class te{static toPattern(e){const t=new K(te.classify(e)),n=[],r=[];n.push("^");let s="\0",i=!1;for(let o=0;o<e.length;o++){const l=t.classString[o];i||"D"===s||"H"===s||"D"!==l&&"H"!==l?i&&"D"!==l&&"H"!==l&&(n.push(")"),i=!1):(n.push("("),i=!0),"H"===l||"D"===l?(t.dynamicCount++,l!==s&&n.push("D"===l?"\\d*":"[a-fA-F0-9]+")):("C"===l||"O"===l?(r.push(e[o]),t.staticCount++):"S"!==l||"C"!==s&&"O"!==s||r.push("-"),n.push(e[o].replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"))),"S"===l&&t.sepCount++,s=l}i&&n.push(")"),n.push("$"),t.regex=new RegExp(n.join(""),"");let o=r.join("");return"-"===o[o.length-1]&&(o=o.slice(0,o.length-1)),t.smartId=o,t}static createPatterns(e){const t=e.slice(0).sort((e,t)=>{const n=e.length-t.length;return 0!==n?n:e===t?0:e>t?1:-1}),n=[];for(;t.length>0;){const e=new J(t[0],Q.Unknown,Q.Unknown),r=te.toPattern(e.value);for(let e=t.length-1;e>=0;e--){const n=t[e];if(r.regex.test(n)){const s=new J(n,Q.Unknown,Q.Unknown);r.items.push(s),t.splice(e,1)}}n.push(r)}for(const e of n){const t=e.isDynamic();for(const n of e.items)n.classifiedType=t?Q.Dynamic:Q.Static}return n}static createIdMap(e){const t={};return te.createPatterns(e).forEach(e=>e.items.forEach(n=>t[n.value]=e)),t}static analyze(e){const t=new ee,n=te.createIdMap(e);for(const e of Object.keys(n)){n[e].isDynamic()?t.dynamicValues.push(e):t.staticValues.push(e)}return e.length>0&&(t.dynamicity=t.dynamicValues.length/(t.dynamicValues.length+t.staticValues.length)),t.dynamicValues.sort(),t.staticValues.sort(),t}static classify(e){const t=[];for(const n of e)n>="0"&&n<="9"?t.push("D"):n>="a"&&n<="z"||n>="A"&&n<="Z"?t.push("C"):-1!==Y.indexOf(n)?t.push("S"):t.push("O");let n=0;for(let r=0;r<t.length;r++){const s=e[r];if(s>="0"&&s<="9"||s>="a"&&s<="f"||s>="A"&&s<="F")n++;else{if(n>=6&&"S"===t[r])for(let e=r-n;e<r;)t[e++]="H";n=0}}if(n>=6)for(let e=t.length-n;e<t.length;)t[e++]="H";return t.join("")}}class ne{static isDynamic(e){if(!e.ownerDocument||""===e.id)return!0;return ne.ensureMapCreatedAndFresh(e)[e.id].isDynamic()}static isDynamicString(e,t){const n=ne.ensureMapCreatedAndFresh(t);return!!n[e]&&n[e].isDynamic()}static getSmartValues(e){if(!e.ownerDocument||""===e.id)return{smartId:null,smartValue:null};const t=ne.ensureMapCreatedAndFresh(e)[e.id];return{smartId:t.smartId||null,smartValue:t.extractValue(e.id)}}static ensureMapCreatedAndFresh(e){const t=e.ownerDocument;let n=t._rx_dynid;if(!n||!n[e.id]){const r=[],s=e.ownerDocument.all;for(let e=0;e<s.length;e++){const t=s[e];t.hasAttribute("id")&&""!==t.getAttribute("id")&&r.push(t.getAttribute("id"))}n=te.createIdMap(r),t._rx_dynid=n}return n}}function re(e){return e?e.replace(/'/g,"''"):e}function se(e,t){if(!e.parentElement)return-1;const n=e.parentElement.children;let r=0;for(const s of Array.from(n))if(oe(s,t)){if(s===e)return r;r++}return-1}function ie(e,t,n){let r=0;const s=e.children,i=s.length,o=n>=0?n:-n-2;for(let e=n>=0?0:s.length-1;n>=0?e<i:e>=0;e+=n>=0?1:-1){const n=s[e];if(oe(n,t)){if(o===r)return n;r++}}return null}function oe(e,t){if(!t||"*"===t||"tag"===t||"webelement"===t)return!0;if("html"===fe(e)&&("dom"===t||"webdocument"===t))return!0;const n=fe(e);return n===t.toLowerCase()||n+"tag"===t.toLowerCase()}function le(e){const t=e.childNodes;let n="";for(const e of Array.from(t))if(3===e.nodeType){const t=e.nodeValue;if(t){t.trim().length>0&&(n+=ae(t))}}return n.length>0?n:null}function ae(e){return e?e.replace(/[\r\n]/g,""):e}function ue(e,t){const n=t.toLowerCase();if("tagname"===n)return fe(e);if("style"===n)return""+e.getAttribute("style");if("innertext"===n)return le(e);if("valid"===n)return e.ownerDocument?"True":"False";if("visible"===n){const t=window.getComputedStyle(e);return"none"!==t.display&&"hidden"!==t.visibility?"True":"False"}if("enabled"===n)return!0===e.disabled?"False":"True";if("hasfocus"===n)return e.ownerDocument.activeElement===e?"True":"False";if("smartid"===n)return ne.getSmartValues(e).smartId;if("smartvalue"===n)return ne.getSmartValues(e).smartValue;if("safeclass"===n)return function(e){const t=e.classList;if(!t||0===t.length)return null;const n=[];for(const e of Array.from(t))-1===e.search(ce)&&n.push(e);return n.sort(),n.length>0?n.join(" "):null}(e);{let n;const r=e[t];if(r&&""+r!=""&&"object"!=typeof r)n=r;else{if(!e.hasAttribute(t))return null;n=e.getAttribute(t)}return n="boolean"==typeof n?n?"True":"False":n?""+n:null}}const ce=/hover|over|^in$|active|inactive|selected|open|closed|focus|clearfix/i;function fe(e){return e.tagName.toLowerCase().replace(/.+:/g,"")}function he(e){const t=fe(e);return"frame"===t||"iframe"===t}function de(e,t){const n=e.classList;return n&&0!==n.length?Array.from(n).filter(e=>e&&!ce.test(e)&&-1===t.indexOf(e)).sort().map(e=>"\\b"+e+"\\b").join(".*"):null}class ge extends Error{static buildMessage(e,t){const n={literal:e=>'"'+s(e.text)+'"',class(e){const t=e.parts.map(e=>Array.isArray(e)?i(e[0])+"-"+i(e[1]):i(e));return"["+(e.inverted?"^":"")+t+"]"},any:()=>"any character",end:()=>"end of input",other:e=>e.description};function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}function s(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,e=>"\\x0"+r(e)).replace(/[\x10-\x1F\x7F-\x9F]/g,e=>"\\x"+r(e))}function i(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,e=>"\\x0"+r(e)).replace(/[\x10-\x1F\x7F-\x9F]/g,e=>"\\x"+r(e))}function o(e){return n[e.type](e)}return"Expected "+function(e){const t=e.map(o);let n,r;if(t.sort(),t.length>0){for(n=1,r=1;n<t.length;n++)t[n-1]!==t[n]&&(t[r]=t[n],r++);t.length=r}switch(t.length){case 1:return t[0];case 2:return t[0]+" or "+t[1];default:return t.slice(0,-1).join(", ")+", or "+t[t.length-1]}}(e)+" but "+((l=t)?'"'+s(l)+'"':"end of input")+" found.";var l}constructor(e,t,n,r){super(),this.message=e,this.expected=t,this.found=n,this.location=r,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,ge)}}const me=function(e,t){t=void 0!==t?t:{};const n={},r={rxpath:_t};let s=_t;const i="/",o=Vt("/",!1),l=function(e,t){const n=e.concat(t),r=new Ce("/"===qt()[0],n);return n.forEach(e=>{e.setOwner(r)}),r},a=function(e){return e||new Oe(null,Ne.DescendantOrSelf,null,!1)},u=function(e,t){const n=nn[e.a];if(void 0===n)throw new Error("Invalid axis name: "+e.a);const r=new Oe(null,n,e.v,e.o);return r.predicates=ke.groupParsedExpressions(t),r},c="..",f=Vt("..",!1),h=function(){return{a:"parent",v:null,o:!1}},d=".",g=Vt(".",!1),m=function(){return{a:"self",v:null,o:!1}},p=function(e,t){return{a:e,v:t.v,o:t.o}},w=function(e){return{a:"child",v:e.v,o:e.o}},b="self",v=Vt("self",!1),y="parent",S=Vt("parent",!1),N="child",x=Vt("child",!1),A="descendant",E=Vt("descendant",!1),C="-",O=Vt("-",!1),T="descendant-or-self",k=Vt("descendant-or-self",!1),I="ancestor",D=Vt("ancestor",!1),P="ancestor-or-self",L=Vt("ancestor-or-self",!1),q="preceding-sibling",V=Vt("preceding-sibling",!1),M="following-sibling",j=Vt("following-sibling",!1),R="::",U=Vt("::",!1),F=function(e){return on(e)},_="?",B=Vt("?",!1),H=function(e){return{v:e,o:!1}},G=function(e){return{v:e,o:!0}},$=function(){return{v:null,o:!0}},W="*",z=Vt("*",!1),Z=function(){return{v:null,o:!1}},X="[",Q=Vt("[",!1),J="]",K=Vt("]",!1),Y=function(e){return e},ee="and",te=Vt("and",!1),ne="or",re=Vt("or",!1),se=function(e,t,n){return{e:n,op:t}},ie=function(e,t){return[{e:e,op:"^"}].concat(t)},oe=function(e){return new Te(null,xe.Index,e,null)},le=function(e){return new Te(null,xe.FullText,e,null)},ae="#",ue=Vt("#",!1),ce=function(e){return new Te(null,xe.UniqueId,e,null)},fe="~",he=Vt("~",!1),de="=",me=Vt("=",!1),pe="!=",we=Vt("!=",!1),be=">",ve=Vt(">",!1),ye="<",Se=Vt("<",!1),Ae=">=",Ee=Vt(">=",!1),Ie="<=",Re=Vt("<=",!1),Ue="!~",Fe=Vt("!~",!1),_e=function(e,t,n){t=on(t);const r=rn[t];return r!==xe.Like&&r!==xe.NotLike||!n.value||(n=new Me(n.value)),new Te(null,r,e,n)},Be="(",He=Vt("(",!1),Ge=")",$e=Vt(")",!1),We="+",ze=Vt("+",!1),Ze=function(e){return e},Xe=function(e,t){return new Pe(null,e.concat(t))},Qe="@",Je=Vt("@",!1),Ke=function(e){return new De(e)},Ye="$",et=Vt("$",!1),tt=function(e){return new je(null,e)},nt="()",rt=Vt("()",!1),st=function(e){return new Ve(e)},it=/^[a-zA-Z_]/,ot=Mt([["a","z"],["A","Z"],"_"],!1,!1),lt=/^[a-zA-Z0-9_\-]/,at=Mt([["a","z"],["A","Z"],["0","9"],"_","-"],!1,!1),ut=function(e){return e[0]+sn(e[1])},ct=/^[0-9]/,ft=Mt([["0","9"]],!1,!1),ht=function(e){return new qe(parseInt((e[0]?"-":"")+sn(e[1]),10))},dt="e",gt=Vt("e",!1),mt="E",pt=Vt("E",!1),wt=function(){return new qe(parseFloat(qt()))},bt="'",vt=Vt("'",!1),yt=/^[^']/,St=Mt(["'"],!0,!1),Nt="''",xt=Vt("''",!1),At=function(e){return new Le((t=function(e){return e?e.replace(/''/g,"'"):e}(sn(e)))?t.replace(/\r\n/g,""):t);var t},Et=/^[\t\r\n ]/,Ct=Mt(["\t","\r","\n"," "],!1,!1);let Ot=0,Tt=0;const kt=[{line:1,column:1}];let It,Dt=0,Pt=[],Lt=0;if("startRule"in t){if(!(t.startRule in r))throw new Error("Can't start parsing from rule \""+t.startRule+'".');s=r[t.startRule]}function qt(){return e.substring(Tt,Ot)}function Vt(e,t){return{type:"literal",text:e,ignoreCase:t}}function Mt(e,t,n){return{type:"class",parts:e,inverted:t,ignoreCase:n}}function jt(t){let n,r=kt[t];if(r)return r;for(n=t-1;!kt[n];)n--;for(r={line:(r=kt[n]).line,column:r.column};n<t;)10===e.charCodeAt(n)?(r.line++,r.column=1):r.column++,n++;return kt[t]=r,r}function Rt(e,t){const n=jt(e),r=jt(t);return{start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:r.line,column:r.column}}}function Ut(e){Ot<Dt||(Ot>Dt&&(Dt=Ot,Pt=[]),Pt.push(e))}function Ft(e,t,n){return new ge(ge.buildMessage(e,t),e,t,n)}function _t(){let t,r,s,a;for(t=Ot,r=[],s=Ht();s!==n;)r.push(s),s=Ht();if(r!==n){for(s=[],a=Bt();a!==n;)s.push(a),a=Bt();s!==n?(47===e.charCodeAt(Ot)?(a=i,Ot++):(a=n,0===Lt&&Ut(o)),a===n&&(a=null),a!==n?(Tt=t,t=r=l(r,s)):(Ot=t,t=n)):(Ot=t,t=n)}else Ot=t,t=n;return t}function Bt(){let t,r,s,l;return t=Ot,47===e.charCodeAt(Ot)?(r=i,Ot++):(r=n,0===Lt&&Ut(o)),r!==n?(s=Ot,Lt++,47===e.charCodeAt(Ot)?(l=i,Ot++):(l=n,0===Lt&&Ut(o)),Lt--,l!==n?(Ot=s,s=void 0):s=n,s===n&&(s=Ht()),s!==n?(Tt=t,t=r=a(s)):(Ot=t,t=n)):(Ot=t,t=n),t}function Ht(){let t,r,s,i,o;if(t=Ot,(r=function(){let t,r,s,i,o,l;return t=Ot,(r=tn())!==n?(e.substr(Ot,2)===c?(s=c,Ot+=2):(s=n,0===Lt&&Ut(f)),s!==n&&(i=tn())!==n?(Tt=t,r=h(),t=r):(Ot=t,t=n)):(Ot=t,t=n),t===n&&(t=Ot,(r=tn())!==n?(46===e.charCodeAt(Ot)?(s=d,Ot++):(s=n,0===Lt&&Ut(g)),s!==n&&(i=tn())!==n?(Tt=t,r=m(),t=r):(Ot=t,t=n)):(Ot=t,t=n),t===n&&(t=Ot,(r=tn())!==n&&(s=function(){let t,r,s,i,o;return t=Ot,e.substr(Ot,4)===b?(r=b,Ot+=4):(r=n,0===Lt&&Ut(v)),r===n&&(e.substr(Ot,6)===y?(r=y,Ot+=6):(r=n,0===Lt&&Ut(S)),r===n&&(e.substr(Ot,5)===N?(r=N,Ot+=5):(r=n,0===Lt&&Ut(x)),r===n&&(r=Ot,e.substr(Ot,10)===A?(s=A,Ot+=10):(s=n,0===Lt&&Ut(E)),s!==n?(i=Ot,Lt++,45===e.charCodeAt(Ot)?(o=C,Ot++):(o=n,0===Lt&&Ut(O)),Lt--,o===n?i=void 0:(Ot=i,i=n),i!==n?r=s=[s,i]:(Ot=r,r=n)):(Ot=r,r=n),r===n&&(e.substr(Ot,18)===T?(r=T,Ot+=18):(r=n,0===Lt&&Ut(k)),r===n&&(r=Ot,e.substr(Ot,8)===I?(s=I,Ot+=8):(s=n,0===Lt&&Ut(D)),s!==n?(i=Ot,Lt++,45===e.charCodeAt(Ot)?(o=C,Ot++):(o=n,0===Lt&&Ut(O)),Lt--,o===n?i=void 0:(Ot=i,i=n),i!==n?r=s=[s,i]:(Ot=r,r=n)):(Ot=r,r=n),r===n&&(e.substr(Ot,16)===P?(r=P,Ot+=16):(r=n,0===Lt&&Ut(L)),r===n&&(e.substr(Ot,17)===q?(r=q,Ot+=17):(r=n,0===Lt&&Ut(V)),r===n&&(e.substr(Ot,17)===M?(r=M,Ot+=17):(r=n,0===Lt&&Ut(j)))))))))),r!==n?(e.substr(Ot,2)===R?(s=R,Ot+=2):(s=n,0===Lt&&Ut(U)),s!==n?(Tt=t,r=F(r),t=r):(Ot=t,t=n)):(Ot=t,t=n),t}())!==n&&(i=tn())!==n&&(o=Gt())!==n&&(l=tn())!==n?(Tt=t,r=p(s,o),t=r):(Ot=t,t=n),t===n&&(t=Ot,(r=tn())!==n&&(s=Gt())!==n&&(i=tn())!==n?(Tt=t,r=w(s),t=r):(Ot=t,t=n)))),t}())!==n)if((s=tn())!==n){for(i=[],o=$t();o!==n;)i.push(o),o=$t();i!==n?(Tt=t,t=r=u(r,i)):(Ot=t,t=n)}else Ot=t,t=n;else Ot=t,t=n;return t}function Gt(){let t,r,s,i;return t=Ot,(r=Kt())!==n?(s=Ot,Lt++,63===e.charCodeAt(Ot)?(i=_,Ot++):(i=n,0===Lt&&Ut(B)),Lt--,i===n?s=void 0:(Ot=s,s=n),s!==n?(Tt=t,t=r=H(r)):(Ot=t,t=n)):(Ot=t,t=n),t===n&&(t=Ot,(r=Kt())!==n?(63===e.charCodeAt(Ot)?(s=_,Ot++):(s=n,0===Lt&&Ut(B)),s!==n?(Tt=t,t=r=G(r)):(Ot=t,t=n)):(Ot=t,t=n),t===n&&(t=Ot,63===e.charCodeAt(Ot)?(r=_,Ot++):(r=n,0===Lt&&Ut(B)),r!==n&&(Tt=t,r=$()),(t=r)===n&&(t=Ot,42===e.charCodeAt(Ot)?(r=W,Ot++):(r=n,0===Lt&&Ut(z)),r!==n&&(Tt=t,r=Z()),t=r))),t}function $t(){let t,r,s,i,o,l,a;return t=Ot,91===e.charCodeAt(Ot)?(r=X,Ot++):(r=n,0===Lt&&Ut(Q)),r!==n&&(s=tn())!==n?((i=Wt())===n&&(i=null),i!==n&&(o=tn())!==n?(93===e.charCodeAt(Ot)?(l=J,Ot++):(l=n,0===Lt&&Ut(K)),l!==n&&(a=tn())!==n?(Tt=t,t=r=Y(i)):(Ot=t,t=n)):(Ot=t,t=n)):(Ot=t,t=n),t}function Wt(){let t,r,s,i,o,l,a,u;if(t=Ot,(r=zt())!==n){for(s=[],i=Ot,(o=tn())!==n?(e.substr(Ot,3)===ee?(l=ee,Ot+=3):(l=n,0===Lt&&Ut(te)),l===n&&(e.substr(Ot,2)===ne?(l=ne,Ot+=2):(l=n,0===Lt&&Ut(re))),l!==n&&(a=tn())!==n&&(u=zt())!==n?(Tt=i,i=o=se(r,l,u)):(Ot=i,i=n)):(Ot=i,i=n);i!==n;)s.push(i),i=Ot,(o=tn())!==n?(e.substr(Ot,3)===ee?(l=ee,Ot+=3):(l=n,0===Lt&&Ut(te)),l===n&&(e.substr(Ot,2)===ne?(l=ne,Ot+=2):(l=n,0===Lt&&Ut(re))),l!==n&&(a=tn())!==n&&(u=zt())!==n?(Tt=i,i=o=se(r,l,u)):(Ot=i,i=n)):(Ot=i,i=n);s!==n?(Tt=t,t=r=ie(r,s)):(Ot=t,t=n)}else Ot=t,t=n;return t===n&&(t=Ot,(r=Yt())!==n&&(Tt=t,r=oe(r)),(t=r)===n&&(t=Ot,63===e.charCodeAt(Ot)?(r=_,Ot++):(r=n,0===Lt&&Ut(B)),r!==n&&(s=en())!==n?(Tt=t,t=r=le(s)):(Ot=t,t=n),t===n&&(t=Ot,35===e.charCodeAt(Ot)?(r=ae,Ot++):(r=n,0===Lt&&Ut(ue)),r!==n&&(s=en())!==n?(Tt=t,t=r=ce(s)):(Ot=t,t=n),t===n&&(t=Ot,(r=Zt())!==n&&(Tt=t,r=oe(r)),(t=r)===n&&(t=Ot,(r=Qt())!==n&&(Tt=t,r=oe(r)),t=r))))),t}function zt(){let t,r,s,i,o,l,a;return t=Ot,(r=Jt())!==n&&(s=tn())!==n?(126===e.charCodeAt(Ot)?(i=fe,Ot++):(i=n,0===Lt&&Ut(he)),i===n&&(61===e.charCodeAt(Ot)?(i=de,Ot++):(i=n,0===Lt&&Ut(me)),i===n&&(e.substr(Ot,2)===pe?(i=pe,Ot+=2):(i=n,0===Lt&&Ut(we)),i===n&&(i=Ot,62===e.charCodeAt(Ot)?(o=be,Ot++):(o=n,0===Lt&&Ut(ve)),o!==n?(l=Ot,Lt++,61===e.charCodeAt(Ot)?(a=de,Ot++):(a=n,0===Lt&&Ut(me)),Lt--,a===n?l=void 0:(Ot=l,l=n),l!==n?i=o=[o,l]:(Ot=i,i=n)):(Ot=i,i=n),i===n&&(i=Ot,60===e.charCodeAt(Ot)?(o=ye,Ot++):(o=n,0===Lt&&Ut(Se)),o!==n?(l=Ot,Lt++,61===e.charCodeAt(Ot)?(a=de,Ot++):(a=n,0===Lt&&Ut(me)),Lt--,a===n?l=void 0:(Ot=l,l=n),l!==n?i=o=[o,l]:(Ot=i,i=n)):(Ot=i,i=n),i===n&&(e.substr(Ot,2)===Ae?(i=Ae,Ot+=2):(i=n,0===Lt&&Ut(Ee)),i===n&&(e.substr(Ot,2)===Ie?(i=Ie,Ot+=2):(i=n,0===Lt&&Ut(Re)),i===n&&(e.substr(Ot,2)===Ue?(i=Ue,Ot+=2):(i=n,0===Lt&&Ut(Fe))))))))),i!==n&&(o=tn())!==n&&(l=Jt())!==n?(Tt=t,t=r=_e(r,i,l)):(Ot=t,t=n)):(Ot=t,t=n),t===n&&(t=Ot,40===e.charCodeAt(Ot)?(r=Be,Ot++):(r=n,0===Lt&&Ut(He)),r!==n&&(s=tn())!==n&&(i=Wt())!==n&&(o=tn())!==n?(41===e.charCodeAt(Ot)?(l=Ge,Ot++):(l=n,0===Lt&&Ut($e)),l!==n?(Tt=t,t=r=Y(i)):(Ot=t,t=n)):(Ot=t,t=n)),t}function Zt(){let t,r,s,i,o;if(t=Ot,r=[],s=Ot,(i=Xt())!==n?(43===e.charCodeAt(Ot)?(o=We,Ot++):(o=n,0===Lt&&Ut(ze)),o!==n?(Tt=s,s=i=Ze(i)):(Ot=s,s=n)):(Ot=s,s=n),s!==n)for(;s!==n;)r.push(s),s=Ot,(i=Xt())!==n?(43===e.charCodeAt(Ot)?(o=We,Ot++):(o=n,0===Lt&&Ut(ze)),o!==n?(Tt=s,s=i=Ze(i)):(Ot=s,s=n)):(Ot=s,s=n);else r=n;return r!==n&&(s=Xt())!==n?(Tt=t,t=r=Xe(r,s)):(Ot=t,t=n),t}function Xt(){let e;return(e=en())===n&&(e=Qt()),e}function Qt(){let t,r,s;return t=Ot,36===e.charCodeAt(Ot)?(r=Ye,Ot++):(r=n,0===Lt&&Ut(et)),r!==n&&(s=Kt())!==n?(Tt=t,t=r=tt(s)):(Ot=t,t=n),t}function Jt(){let t,r;return(t=Zt())===n&&(t=Yt())===n&&(t=function(){let t,r,s,i,o,l,a,u,c,f;if(t=Ot,r=Ot,45===e.charCodeAt(Ot)?(s=C,Ot++):(s=n,0===Lt&&Ut(O)),s===n&&(s=null),s!==n){if(i=[],ct.test(e.charAt(Ot))?(o=e.charAt(Ot),Ot++):(o=n,0===Lt&&Ut(ft)),o!==n)for(;o!==n;)i.push(o),ct.test(e.charAt(Ot))?(o=e.charAt(Ot),Ot++):(o=n,0===Lt&&Ut(ft));else i=n;if(i!==n){if(o=Ot,46===e.charCodeAt(Ot)?(l=d,Ot++):(l=n,0===Lt&&Ut(g)),l!==n){if(a=[],ct.test(e.charAt(Ot))?(u=e.charAt(Ot),Ot++):(u=n,0===Lt&&Ut(ft)),u!==n)for(;u!==n;)a.push(u),ct.test(e.charAt(Ot))?(u=e.charAt(Ot),Ot++):(u=n,0===Lt&&Ut(ft));else a=n;a!==n?o=l=[l,a]:(Ot=o,o=n)}else Ot=o,o=n;if(o===n&&(o=null),o!==n){if(l=Ot,101===e.charCodeAt(Ot)?(a=dt,Ot++):(a=n,0===Lt&&Ut(gt)),a===n&&(69===e.charCodeAt(Ot)?(a=mt,Ot++):(a=n,0===Lt&&Ut(pt))),a!==n)if(43===e.charCodeAt(Ot)?(u=We,Ot++):(u=n,0===Lt&&Ut(ze)),u===n&&(45===e.charCodeAt(Ot)?(u=C,Ot++):(u=n,0===Lt&&Ut(O))),u===n&&(u=null),u!==n){if(c=[],ct.test(e.charAt(Ot))?(f=e.charAt(Ot),Ot++):(f=n,0===Lt&&Ut(ft)),f!==n)for(;f!==n;)c.push(f),ct.test(e.charAt(Ot))?(f=e.charAt(Ot),Ot++):(f=n,0===Lt&&Ut(ft));else c=n;c!==n?l=a=[a,u,c]:(Ot=l,l=n)}else Ot=l,l=n;else Ot=l,l=n;l===n&&(l=null),l!==n?r=s=[s,i,o,l]:(Ot=r,r=n)}else Ot=r,r=n}else Ot=r,r=n}else Ot=r,r=n;return r!==n&&(Tt=t,r=wt()),t=r}())===n&&(t=en())===n&&(t=function(){let t,r,s;return t=Ot,(r=Kt())!==n?(e.substr(Ot,2)===nt?(s=nt,Ot+=2):(s=n,0===Lt&&Ut(rt)),s!==n?(Tt=t,t=r=st(r)):(Ot=t,t=n)):(Ot=t,t=n),t}())===n&&(t=Qt())===n&&(t=function(){let t,r,s;return t=Ot,64===e.charCodeAt(Ot)?(r=Qe,Ot++):(r=n,0===Lt&&Ut(Je)),r!==n&&(s=Kt())!==n?(Tt=t,t=r=Ke(s)):(Ot=t,t=n),t}())===n&&(t=Ot,(r=Kt())!==n&&(Tt=t,r=Ke(r)),t=r),t}function Kt(){let t,r,s,i,o;if(t=Ot,r=Ot,it.test(e.charAt(Ot))?(s=e.charAt(Ot),Ot++):(s=n,0===Lt&&Ut(ot)),s!==n){for(i=[],lt.test(e.charAt(Ot))?(o=e.charAt(Ot),Ot++):(o=n,0===Lt&&Ut(at));o!==n;)i.push(o),lt.test(e.charAt(Ot))?(o=e.charAt(Ot),Ot++):(o=n,0===Lt&&Ut(at));i!==n?r=s=[s,i]:(Ot=r,r=n)}else Ot=r,r=n;return r!==n&&(Tt=t,r=ut(r)),t=r}function Yt(){let t,r,s,i,o,l;if(t=Ot,r=Ot,45===e.charCodeAt(Ot)?(s=C,Ot++):(s=n,0===Lt&&Ut(O)),s===n&&(s=null),s!==n){if(i=[],ct.test(e.charAt(Ot))?(o=e.charAt(Ot),Ot++):(o=n,0===Lt&&Ut(ft)),o!==n)for(;o!==n;)i.push(o),ct.test(e.charAt(Ot))?(o=e.charAt(Ot),Ot++):(o=n,0===Lt&&Ut(ft));else i=n;i!==n?(o=Ot,Lt++,46===e.charCodeAt(Ot)?(l=d,Ot++):(l=n,0===Lt&&Ut(g)),Lt--,l===n?o=void 0:(Ot=o,o=n),o!==n?r=s=[s,i,o]:(Ot=r,r=n)):(Ot=r,r=n)}else Ot=r,r=n;return r!==n&&(Tt=t,r=ht(r)),t=r}function en(){let t,r,s,i;if(t=Ot,39===e.charCodeAt(Ot)?(r=bt,Ot++):(r=n,0===Lt&&Ut(vt)),r!==n){for(s=[],yt.test(e.charAt(Ot))?(i=e.charAt(Ot),Ot++):(i=n,0===Lt&&Ut(St)),i===n&&(e.substr(Ot,2)===Nt?(i=Nt,Ot+=2):(i=n,0===Lt&&Ut(xt)));i!==n;)s.push(i),yt.test(e.charAt(Ot))?(i=e.charAt(Ot),Ot++):(i=n,0===Lt&&Ut(St)),i===n&&(e.substr(Ot,2)===Nt?(i=Nt,Ot+=2):(i=n,0===Lt&&Ut(xt)));s!==n?(39===e.charCodeAt(Ot)?(i=bt,Ot++):(i=n,0===Lt&&Ut(vt)),i!==n?(Tt=t,t=r=At(s)):(Ot=t,t=n)):(Ot=t,t=n)}else Ot=t,t=n;return t}function tn(){let t,r;for(t=[],Et.test(e.charAt(Ot))?(r=e.charAt(Ot),Ot++):(r=n,0===Lt&&Ut(Ct));r!==n;)t.push(r),Et.test(e.charAt(Ot))?(r=e.charAt(Ot),Ot++):(r=n,0===Lt&&Ut(Ct));return t}const nn={self:Ne.Self,parent:Ne.Parent,child:Ne.Child,descendant:Ne.Descendant,"descendant-or-self":Ne.DescendantOrSelf,ancestor:Ne.Ancestor,"ancestor-or-self":Ne.AncestorOrSelf,"following-sibling":Ne.FollowingSibling,"preceding-sibling":Ne.PrecedingSibling},rn={"~":xe.Like,"=":xe.Equal,"!=":xe.NotEqual,">":xe.GreaterThan,"<":xe.LessThan,">=":xe.GreaterOrEqual,"<=":xe.LessOrEqual,"!~":xe.NotLike};function sn(e){return e.join("")}function on(e){return"object"==typeof e&&e[0]?e[0]:e}if((It=s())!==n&&Ot===e.length)return It;throw It!==n&&Ot<e.length&&Ut({type:"end"}),Ft(Pt,Dt<e.length?e.charAt(Dt):null,Dt<e.length?Rt(Dt,Dt+1):Rt(Dt,Dt))};let pe=1;function we(e){const t=[],n={};return e.forEach(e=>{const r=function(e){let t=e._rxpid_;return void 0===t&&(t=e._rxpid_=pe++),t}(e);n[r]||t.push(e),n[r]=!0}),t}function be(e,t,n,r,s){if(t===Ne.Ancestor||t===Ne.AncestorOrSelf){let i,o=n;if(t===Ne.AncestorOrSelf&&ye(n,e,r)&&s)return;for(;null!=(i=ve(o));){if(ye(i,e,r)&&s)return;o=i}}else if(t===Ne.Child)try{const t=n.children;for(const n of Array.from(t))if(null!=n&&ye(n,e,r)&&s)return}catch(e){console.warn("Failed to collect children: "+e)}else if(t===Ne.Descendant||t===Ne.DescendantOrSelf)!function(e,t,n,r,s){const i=new Se;i.enqueue(e);for(;i.getLength()>0;){const o=i.dequeue();if(o&&(e!==o||r)&&ye(o,t,n)&&s)return;try{if(o)for(const e of Array.from(o.children))e&&i.enqueue(e)}catch(e){console.warn("Failed to collect children: "+e)}}}(n,e,r,t===Ne.DescendantOrSelf,s);else if(t===Ne.Parent){const t=ve(n);if(null!=t&&ye(t,e,r)&&s)return}else if(t===Ne.Self){if(ye(n,e,r)&&s)return}else if(t===Ne.FollowingSibling){const t=n.parentElement?n.parentElement.children:[];for(let i=se(n,"*")+1;i<t.length;i++){const n=t[i];if(n&&ye(n,e,r)&&s)return}}else if(t===Ne.PrecedingSibling){const t=n.parentElement?n.parentElement.children:[];for(let i=se(n,"*")-1;i>=0;i--){const n=t[i];if(n&&ye(n,e,r)&&s)return}}}function ve(e){if(e.parentElement===e.ownerDocument.documentElement){const t=e.ownerDocument;return(t.defaultView||t.contentWindow).frameElement}return e.parentElement}function ye(e,t,n){if(!oe(e,t.nodeName))return!1;for(const n of t.predicates){const r=n;if((!r.isComparisonPred||r.op!==xe.ResultSelectIndex)&&!n.evaluate(e,t.nodeName,0))return!1}return n.push(e),!0}class Se{constructor(){this.queue=[],this.offset=0}getLength(){return this.queue.length-this.offset}enqueue(e){this.queue.push(e)}dequeue(){if(0===this.queue.length)return;const e=this.queue[this.offset];return 2*++this.offset>=this.queue.length&&(this.queue=this.queue.slice(this.offset),this.offset=0),e}}var Ne,xe,Ae;!function(e){e[e.Self=0]="Self",e[e.Parent=1]="Parent",e[e.Child=2]="Child",e[e.Descendant=3]="Descendant",e[e.DescendantOrSelf=4]="DescendantOrSelf",e[e.Ancestor=5]="Ancestor",e[e.AncestorOrSelf=6]="AncestorOrSelf",e[e.FollowingSibling=7]="FollowingSibling",e[e.PrecedingSibling=8]="PrecedingSibling"}(Ne||(Ne={})),function(e){e[e.Like=0]="Like",e[e.Equal=1]="Equal",e[e.NotEqual=2]="NotEqual",e[e.Index=3]="Index",e[e.ResultSelectIndex=4]="ResultSelectIndex",e[e.StartsWithString=5]="StartsWithString",e[e.GreaterThan=5]="GreaterThan",e[e.FullText=6]="FullText",e[e.GreaterOrEqual=7]="GreaterOrEqual",e[e.EndsWithString=8]="EndsWithString",e[e.LessThan=8]="LessThan",e[e.LessOrEqual=9]="LessOrEqual",e[e.UniqueId=10]="UniqueId",e[e.NotLike=11]="NotLike"}(xe||(xe={})),function(e){e[e.And=0]="And",e[e.Or=1]="Or"}(Ae||(Ae={}));class Ee{constructor(){this.selectorName="rxpath"}apply(e,t,n){return Ce.parse(t).apply(e,n)}isValidSelector(e){try{return Ce.parse(e),!0}catch(e){return!1}}}class Ce{constructor(e,t,n=null){this.absolute=e,this.steps=t,this.dataProvider=n}static parse(e){return me(e,{})}clone(){const e=new Ce(this.absolute,this.steps.map(e=>e.clone()),this.dataProvider);return e.steps.forEach(t=>t.setOwner(e)),e}toString(e){const t=this.steps;let n=this.absolute?"/":"";!this.absolute&&t.length>0&&t[0].axis===Ne.DescendantOrSelf&&0===t[0].predicates.length&&t[0].isNodeTestAny()&&(n="./");for(let r=0;r<t.length;r++)n+=t[r].toString(e),r<t.length-1&&(n+="/");return n}apply(e,t){return function(e,t,n){let r=t;(e=e.optimize()).absolute&&(r=r.ownerDocument.documentElement);let s=[],i=[];s.push(r);for(let t=0;t<e.steps.length;t++){const r=e.steps[t];i=we(s),s=[];const o=r.axis===Ne.Child&&1===r.predicates.length&&r.predicates[0].isComparisonPred&&r.predicates[0].op===xe.Index;let l=null,a=null,u=null;const c=r.axis===Ne.DescendantOrSelf&&1===r.predicates.length&&(l=r.predicates[0]).isComparisonPred,f=c&&l&&l.op===xe.Equal&&"attribute"===(a=l.left).type&&l.right&&("string"===(u=l.right).type||"var"===u.type),h=c&&l&&l.op===xe.UniqueId,d=[];if(h||f){const e=a?a.attrName:null;h&&l&&(u=l.left);for(const t of i)if(null===e||"id"===e){let e=!1;if(u){const n=u.getStringValue(t,r.nodeName),i=t.ownerDocument.getElementById(n||"");i&&(e=oe(i,r.nodeName))&&s.push(i),(h||e)&&d.push(t)}}}if(o){s=[];const e=parseInt(r.predicates[0].left.getStringValue(document.documentElement,r.nodeName)||"",10);if(e!==Number.NaN&&0!==e)for(const t of i){const n=ie(t,r.nodeName,e-1);n&&s.push(n)}}else{let o=!1,l=null;r.predicates.length>1&&(o=(l=r.predicates[r.predicates.length-1]).isComparisonPred&&(l.op===xe.ResultSelectIndex||l.op===xe.Index))&&(l.op=xe.ResultSelectIndex);const a=!o&&n&&t===e.steps.length-1;for(const e of i){if(a&&s.length>0)break;-1===d.indexOf(e)&&be(r,r.axis,e,s,a)}if(o){let e=!1,t=0;if(l)if((t=parseInt(l.left.getStringValue(document.documentElement,"*")||"",10))>=0){let t=1;for(const n of s)if(l.evaluate(n,"*",t++)){s=[n],e=!0;break}}else{let t=-1;for(let n=s.length-1;n>=0;n--){const r=s[n];if(l.evaluate(r,"",t--)){s=[r],e=!0;break}}}e||(s=[])}}r.optional&&i.forEach(e=>s.push(e))}return s=we(s),n&&s.length>1?s.slice(0,1):s}(this,e||document.documentElement,t)}keepStep(e,t){return e.axis===Ne.Self&&e.isNodeTestAny()&&!e.hasPredicates()?{keep:!1}:e.axis!==Ne.DescendantOrSelf&&e.axis!==Ne.Descendant||!e.isNodeTestAny()||e.hasPredicates()||t.axis!==Ne.Child&&t.axis!==Ne.Descendant&&t.axis!==Ne.DescendantOrSelf?e.axis===Ne.DescendantOrSelf&&e.isNodeTestAny()&&!e.hasPredicates()&&t.axis===Ne.DescendantOrSelf&&t.isNodeTestAny()&&!t.hasPredicates()?{keep:!1}:e.axis!==Ne.Child||!e.isNodeTestAny()||e.hasPredicates()||t.axis!==Ne.DescendantOrSelf&&t.axis!==Ne.Descendant?{keep:!0}:{keep:!1}:{keep:!1,nextAxis:e.axis}}optimize(){if(!this.steps.some(e=>e.axis===Ne.Descendant||e.axis===Ne.DescendantOrSelf||e.axis===Ne.Self))return this;try{const e=this.steps.map(e=>e.clone()),t=[];for(let n=0;n<e.length-1;n++){const r=e[n],s=e[n+1],{keep:i,nextAxis:o}=this.keepStep(r,s);o&&(s.axis=o),i&&t.push(r)}return t.push(e[e.length-1]),new Ce(this.absolute,t,this.dataProvider)}catch(e){const t=this.toString(!1);throw new Error(`Failed to optimize '${t}': ${e.message}`)}}appendResultSelectIndex(e){const t=this.steps[this.steps.length-1];if(t.predicates||(t.predicates=[]),0===t.predicates.length)t.predicates.push(new Te(this,xe.NotEqual,new qe(0),new qe(1)));else if(2===t.predicates.length)return this;return t.predicates.push(new Te(this,xe.ResultSelectIndex,new qe(e),null)),this}optionalize(){const e=this.clone();for(let t=0;t<e.steps.length-1;t++)e.steps[t].nodeName&&(e.steps[t].optional=!0);return e}}class Oe{constructor(e,t,n,r){this.owner=e,this.axis=t,this.nodeName=n,this.optional=r,this.predicates=[]}clone(){const e=new Oe(this.owner,this.axis,this.nodeName,this.optional);return e.predicates=this.predicates.map(e=>e.clone()),e}setOwner(e){this.owner=e,this.predicates.forEach(t=>t.setOwner(e))}toString(e){const{axis:t,nodeName:n,optional:r,predicates:s}=this;let i="",o=!1;t===Ne.Ancestor?i+="ancestor::":t===Ne.AncestorOrSelf?i+="ancestor-or-self::":t===Ne.Descendant?i+="descendant::":t===Ne.FollowingSibling?i+="following-sibling::":t===Ne.PrecedingSibling?i+="preceding-sibling::":t===Ne.DescendantOrSelf?!this.isNodeTestAny()||s.length>0?i+="descendant-or-self::":o=!0:t===Ne.Parent?this.isNodeTestAny()&&!this.optional?(i+="..",o=!0):i+="parent::":t===Ne.Self&&(this.isNodeTestAny()&&!this.optional?(i+=".",o=!0):i+="self::"),this.isNodeTestAny()?i+=r?"?":o?"":"*":i+=n+(r?"?":"");for(const t of s)i+="["+(t?t.toString(e):"")+"]";return i}isNodeTestAny(){return!this.nodeName||"*"===this.nodeName}hasPredicates(){return this.predicates.length>0}}class Te{constructor(e,t,n,r){this.isComparisonPred=!0,this.owner=e,this.op=t,this.left=n,this.right=r}clone(){return new Te(this.owner,this.op,this.left.clone(),this.right&&this.right.clone())}setOwner(e){this.owner=e,this.left&&this.left.setOwner(e),this.right&&this.right.setOwner(e)}evaluate(e,t,n){const{op:r,left:s,right:i}=this;if(r===xe.Equal)return!!i&&ae(s.getStringValue(e,t))===ae(i.getStringValue(e,t));if(r===xe.NotEqual)return!!i&&ae(s.getStringValue(e,t))!==ae(i.getStringValue(e,t));if(r===xe.Like){if(!i)return!1;if(i.regex)return i.matches(s.getStringValue(e,t)||"");if(s.regex)return s.matches(i.getStringValue(e,t)||"");if("concatlist"===i.type){return new Me(i.getStringValue(e,t)||"").matches(s.getStringValue(e,t)||"")}}else if(r===xe.NotLike){if(!i)return!1;if(i.regex)return!i.matches(s.getStringValue(e,t)||"");if(s.regex)return!s.matches(i.getStringValue(e,t)||"");if("concatlist"===i.type){return!new Me(i.getStringValue(e,t)||"").matches(s.getStringValue(e,t)||"")}}else{if(r===xe.Index){const n=se(e,t)+1;return s.getStringValue(e,t)===n.toString()}if(r===xe.ResultSelectIndex)return s.getStringValue(e,t)===n.toString();if(r===xe.StartsWithString&&i&&!i.isNumber){const n=s.getStringValue(e,t),r=i.getStringValue(e,t);return!(!n||!r)&&0===n.indexOf(r)}if(r===xe.EndsWithString&&i&&!i.isNumber){const n=s.getStringValue(e,t),r=i.getStringValue(e,t);return!!(n&&r&&n.length>=r.length)&&n.indexOf(r)===n.length-r.length}if(r===xe.GreaterThan||r===xe.GreaterOrEqual||r===xe.LessOrEqual||r===xe.LessThan){if(!i)return!1;const n=s.getStringValue(e,t),o=i.getStringValue(e,t),l=parseFloat(n||""),a=parseFloat(o||"");if(l===Number.NaN||a===Number.NaN)return!1;switch(r){case xe.GreaterThan:return l>a;case xe.GreaterOrEqual:return l>=a;case xe.LessOrEqual:return l<=a;case xe.LessThan:return l<a;default:return!1}}else{if(r===xe.UniqueId)return s.getStringValue(e,t)===e.id;if(r===xe.FullText){let n=s.getStringValue(e,t);if(!n)return!1;n=n.toLowerCase().trim();for(const t of Array.from(e.attributes)){if((t.value||"").toLowerCase().indexOf(n)>=0)return!0}const r=le(e);return!!r&&r.toLowerCase().trim().indexOf(n)>=0}}}return!1}toString(e){let t="";const{op:n,left:r,right:s}=this;if(n===xe.Equal)t="=";else if(n===xe.Like)t="~";else if(n===xe.NotEqual)t="!=";else if(n===xe.NotLike)t="!~";else if(n===xe.GreaterThan)t=">";else if(n===xe.GreaterOrEqual)t=">=";else if(n===xe.LessThan)t="<";else if(n===xe.LessOrEqual)t="<=";else{if(n===xe.Index||n===xe.ResultSelectIndex){if(e&&r.varName){const t=r.toString(e).replace(/'/g,"");return parseInt(t,10)===Number.NaN?"0":t}return r.toString(e)}if(n===xe.FullText)return"?"+r.toString(e);if(n===xe.UniqueId)return"#"+r.toString(e)}return r.toString(e)+t+(s?s.toString(e):"")}}class ke{constructor(e,t,n){this.isBooleanPred=!0,this.owner=e,this.op=t,this.children=n}static groupParsedExpressions(e){if(0===e.length)return[];const t=[];for(const n of e){const e=ke.groupParsePredicate(n);t.push(e||new Ie)}return t}static groupParsePredicate(e){if(!e)return null;if(void 0===e.length)return e;if(0===e.length)return null;if(1===e.length)return"^"===e[0].op?e[0].e:e[0];let t=null,n="";for(let r=0;r<e.length;r++){const s=e[r],i=e[r+1];if("^"===s.op){t=new ke(null,"and"===i.op?Ae.And:Ae.Or,[]);const e=ke.groupParsePredicate(s.e);e&&t.children.push(e),n=i.op}else if(s.op===n)if(s.e){const e=ke.groupParsePredicate(s.e);e&&t&&t.children.push(e)}else t&&t.children.push(s);else if(s.op!==n){const e=t;if(t=new ke(null,"and"===s.op?Ae.And:Ae.Or,e?[e]:[]),s.e){const e=ke.groupParsePredicate(s.e);e&&t&&t.children.push(e)}else t.children.push(s);n=s.op}}return t}clone(){return new ke(this.owner,this.op,this.children.map(e=>e.clone()))}setOwner(e){this.owner=e,this.children.forEach(t=>t.setOwner(e))}evaluate(e,t,n){if(this.op===Ae.And){for(const r of this.children)if(!r.evaluate(e,t,n))return!1;return!0}if(this.op===Ae.Or){for(const r of this.children)if(r.evaluate(e,t,n))return!0;return!1}throw new Error("Invalid boolean operator: "+this.op)}toString(e){let t="";for(let n=0;n<this.children.length;n++){const r=this.children[n],s=r.isBooleanPred;s&&(t+="("),t+=r.toString(e),s&&(t+=")"),n<this.children.length-1&&(t+=this.op===Ae.And?" and ":" or ")}return t}}class Ie{constructor(e){this.owner=e||null}clone(){return new Ie(this.owner)}setOwner(e){this.owner=e}evaluate(e,t,n){return!0}toString(e){return""}}class De{constructor(e,t){this.type="attribute",this.isNumber=!1,this.attrName=e,this.owner=t||null}clone(){return new De(this.attrName,this.owner)}getStringValue(e,t){return ue(e,this.attrName)}toString(e){return"."!==this.attrName?"@"+this.attrName:"."}matches(e){throw new Error("Unsupported")}setOwner(e){this.owner=e}}class Pe{constructor(e,t){this.type="concatlist",this.isNumber=!1,this.owner=e,this.items=t}clone(){return new Pe(this.owner,this.items.map(e=>e.clone()))}getStringValue(e,t){let n="";for(const r of this.items)n+=r.getStringValue(e,t);return n}toString(e){let t="";for(let n=0;n<this.items.length;n++){t+=this.items[n].toString(e),n<this.items.length-1&&(t+="+")}return t}matches(e){throw new Error("Unsupported")}setOwner(e){this.owner=e,this.items.forEach(t=>t.setOwner(e))}}class Le{constructor(e,t){this.type="string",this.isNumber=!1,this.value=e,this.owner=t||null}clone(){return new Le(this.value,this.owner)}getStringValue(e,t){return this.value}toString(e){return"'"+re(this.value)+"'"}matches(e){return e===this.value}setOwner(e){this.owner=e}}class qe{constructor(e,t){this.type="number",this.isNumber=!0,this.value=e,this.owner=t||null}clone(){return new qe(this.value,this.owner)}getStringValue(e,t){return this.value.toString()}toString(e){return this.value.toString()}matches(e){return e===this.value}setOwner(e){this.owner=e}}class Ve{constructor(e,t){this.type="nodefunc",this.isNumber=!1,this.funcName=e,this.owner=t||null}clone(){return new Ve(this.funcName,this.owner)}getStringValue(e,t){const n=this.funcName;if("text"===n)return e.textContent;if("pos"===n){if(!e.parentElement)return"";const t=e.parentElement.children;for(let n=0;n<t.length;n++)if(t[n]===e)return n.toString();return""}if("null"===n)return null;if("index"===n){const n=se(e,t)+1;return 0===n?null:n.toString()}return"x"===n?e.getBoundingClientRect().left.toString():"cx"===n?e.clientLeft.toString():"y"===n?e.getBoundingClientRect().top.toString():"cy"===n?e.clientTop.toString():"width"===n?e.getBoundingClientRect().width.toString():"height"===n?e.getBoundingClientRect().height.toString():"first"===n?e.parentElement&&e.parentElement.children[0]===e?"True":"False":"last"===n?e.parentElement&&e.parentElement.children[e.parentElement.children.length-1]===e?"True":"False":""}toString(e){return this.funcName+"()"}matches(e){throw new Error("Unsupported")}setOwner(e){this.owner=e}}class Me{constructor(e,t){this.type="regex",this.isNumber=!1,this.regex=new RegExp(e),this.owner=t||null}clone(){return new Me(this.regex,this.owner)}getStringValue(e,t){return this.regex.source}toString(e){return"'"+re(this.regex.source)+"'"}matches(e){if("string"==typeof e)return this.regex.test(e);if("boolean"==typeof e||"number"==typeof e){const t=e.toString();return this.regex.test(t)}return!1}setOwner(e){this.owner=e}}class je{constructor(e,t){this.type="var",this.isNumber=!1,this.owner=e,this.varName=t}clone(){return new je(this.owner,this.varName)}getStringValue(e,t){return this.owner&&this.owner.dataProvider?this.owner.dataProvider(this.varName):null}toString(e){return e?this.owner&&this.owner.dataProvider?"'"+re(this.owner.dataProvider(this.varName))+"'":"":"$"+this.varName}matches(e){throw new Error("Unsupported")}setOwner(e){this.owner=e}}const Re=7;class Ue{constructor(){this.selectorName="xpath"}apply(e,t,n){e&&e!==e.ownerDocument.documentElement&&"/"===t[0]&&(t="."+t);const r=e.ownerDocument.evaluate(t,e||document,null,Re,null),s=[];for(let e=0;e<r.snapshotLength;e++){const t=r.snapshotItem(e);if(t.nodeType===Node.ELEMENT_NODE&&(s.push(t),n))break}return s}isValidSelector(e){try{return document.evaluate("/fakeprefix/"+e,document,null,Re,null),!0}catch(e){return!1}}}var Fe="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function _e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Be(e,t){return e(t={exports:{}},t.exports),t.exports}var He=Be(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,s=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){s=!0,i=e}finally{try{!r&&l.return&&l.return()}finally{if(s)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function s(e,t){e.forEach(function(e){var n=!0;t(e,function(){return n=!1}),e.childTags&&n&&s(e.childTags,t)})}function i(e,t,n){for(;e.parent;){if(n(e=e.parent))return e;if(e===t)break}return null}t.default=function(e,t){if(Fe.document)return!1;Fe.document=t.context||function(){for(var t=e;t.parent;)t=t.parent;return t}();var o=Object.getPrototypeOf(Fe.document);Object.getOwnPropertyDescriptor(o,"childTags")||Object.defineProperty(o,"childTags",{enumerable:!0,get:function(){return this.children.filter(function(e){return"tag"===e.type||"script"===e.type||"style"===e.type})}});Object.getOwnPropertyDescriptor(o,"attributes")||Object.defineProperty(o,"attributes",{enumerable:!0,get:function(){var e=this.attribs,t=Object.keys(e),n=t.reduce(function(t,n,r){return t[r]={name:n,value:e[n]},t},{});return Object.defineProperty(n,"length",{enumerable:!1,configurable:!1,value:t.length}),n}});o.getAttribute||(o.getAttribute=function(e){return this.attribs[e]||null});o.getElementsByTagName||(o.getElementsByTagName=function(e){var t=[];return s(this.childTags,function(n){n.name!==e&&"*"!==e||t.push(n)}),t});o.getElementsByClassName||(o.getElementsByClassName=function(e){var t=e.trim().replace(/\s+/g," ").split(" "),n=[];return s([this],function(e){var r=e.attribs.class;r&&t.every(function(e){return r.indexOf(e)>-1})&&n.push(e)}),n});o.querySelectorAll||(o.querySelectorAll=function(e){var t=this,o=function(e){return e.split(" ").reverse().map(function(e,t){var o=0===t,l=e.split(":"),a=r(l,2),u=a[0],c=a[1],f=null,h=null;if(function(){switch(!0){case/>/.test(u):h=function(e){return function(t){return t(e.parent)&&e.parent}};break;case/^\./.test(u):var e=u.substr(1).split(".");f=function(t){var n=t.attribs.class;return n&&e.every(function(e){return n.indexOf(e)>-1})},h=function(t,n){return o?t.getElementsByClassName(e.join(" ")):"function"==typeof t?t(f):i(t,n,f)};break;case/^\[/.test(u):var t=u.replace(/\[|\]|"/g,"").split("="),l=r(t,2),a=l[0],c=l[1];f=function(e){var t=Object.keys(e.attribs).indexOf(a)>-1;return!(!t||c&&e.attribs[a]!==c)},h=function(e,t){if(o){var r=(l=[],s([e],function(e){f(e)&&l.push(e)}),{v:l});if("object"===(void 0===r?"undefined":n(r)))return r.v}var l;return"function"==typeof e?e(f):i(e,t,f)};break;case/^#/.test(u):var d=u.substr(1);f=function(e){return e.attribs.id===d},h=function(e,t){if(o){var r=(l=[],s([e],function(e,t){f(e)&&(l.push(e),t())}),{v:l});if("object"===(void 0===r?"undefined":n(r)))return r.v}var l;return"function"==typeof e?e(f):i(e,t,f)};break;case/\*/.test(u):f=function(e){return!0},h=function(e,t){if(o){var r=(l=[],s([e],function(e){return l.push(e)}),{v:l});if("object"===(void 0===r?"undefined":n(r)))return r.v}var l;return"function"==typeof e?e(f):i(e,t,f)};break;default:f=function(e){return e.name===u},h=function(e,t){if(o){var r=(l=[],s([e],function(e){f(e)&&l.push(e)}),{v:l});if("object"===(void 0===r?"undefined":n(r)))return r.v}var l;return"function"==typeof e?e(f):i(e,t,f)}}}(),!c)return h;var d=c.match(/-(child|type)\((\d+)\)$/),g=d[1],m=parseInt(d[2],10)-1,p=function(e){if(e){var t=e.parent.childTags;"type"===g&&(t=t.filter(f));var n=t.findIndex(function(t){return t===e});if(n===m)return!0}return!1};return function(e){var t=h(e);return o?t.reduce(function(e,t){return p(t)&&e.push(t),e},[]):p(t)&&t}})}(e=e.replace(/(>)(\S)/g,"$1 $2").trim()),l=o.shift(),a=o.length;return l(this).filter(function(e){for(var n=0;n<a;){if(!(e=o[n](e,t)))return!1;n+=1}return!0})});o.contains||(o.contains=function(e){var t=!1;return s([this],function(n,r){n===e&&(t=!0,r())}),t});return!0},e.exports=t.default});_e(He);var Ge=Be(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.convertNodeList=function(e){for(var t=e.length,n=new Array(t),r=0;r<t;r++)n[r]=e[r];return n},t.escapeValue=function(e){return e&&e.replace(/['"`\\/:\?&!#$%^()[\]{|}*+;,.<=>@~]/g,"\\$&").replace(/\n/g,"A")}});_e(Ge);Ge.convertNodeList,Ge.escapeValue;var $e=Be(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=t.root,s=void 0===n?document:n,o=t.skip,u=void 0===o?null:o,c=t.priority,f=void 0===c?["id","class","href","src"]:c,h=t.ignore,d=void 0===h?{}:h,g=[],m=e,p=g.length,w=!1,b=u&&(Array.isArray(u)?u:[u]).map(function(e){return"function"!=typeof e?function(t){return t===e}:e}),v=function(e){return u&&b.some(function(t){return t(e)})};Object.keys(d).forEach(function(e){"class"===e&&(w=!0);var t=d[e];"function"!=typeof t&&("number"==typeof t&&(t=t.toString()),"string"==typeof t&&(t=new RegExp((0,Ge.escapeValue)(t).replace(/\\/g,"\\\\"))),"boolean"==typeof t&&(t=t?/(?:)/:/.^/),d[e]=function(e,n){return t.test(n)})}),w&&(y=d.attribute,d.attribute=function(e,t,n){return d.class(t)||y&&y(e,t,n)});var y;for(;m!==s;){if(!0!==v(m)){if(r(f,m,d,g,s))break;if(i(m,d,g,s))break;r(f,m,d,g),g.length===p&&i(m,d,g),g.length===p&&l(f,m,d,g)}m=m.parentNode,p=g.length}if(m===s){var S=a(f,m,d);g.unshift(S)}return g.join(" ")};var n={attribute:function(e){return["style","data-reactid","data-react-checksum"].indexOf(e)>-1}};function r(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:t.parentNode,o=s(e,t,n);if(o&&1===i.querySelectorAll(o).length)return r.unshift(o),!0;return!1}function s(e,t,r){for(var s=t.attributes,i=Object.keys(s).sort(function(t,n){var r=e.indexOf(s[t].name),i=e.indexOf(s[n].name);return-1===i?-1===r?0:-1:r-i}),o=0,l=i.length;o<l;o++){var a=i[o],c=s[a],f=c.name,h=(0,Ge.escapeValue)(c.value);if(!u(r[f]||r.attribute,f,h,n[f]||n.attribute)){var d="["+f+'="'+h+'"]';if(!1===/\b\d/.test(h))if("id"===f&&(d="#"+h),"class"===f)d="."+h.trim().replace(/\s+/g,".");return d}}return null}function i(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.parentNode,s=o(e,t);if(s&&1===r.getElementsByTagName(s).length)return n.unshift(s),!0;return!1}function o(e,t){var n=e.tagName.toLowerCase();return u(t.tag,null,n)?null:n}function l(e,t,n,r){for(var s=t.parentNode,i=s.childTags||s.children,o=0,l=i.length;o<l;o++){var u=i[o];if(u===t){var c=a(e,u,n);if(!c)return console.warn("\n          Element couldn't be matched through strict ignore pattern!\n        ",u,n,c);var f="> "+c+":nth-child("+(o+1)+")";return r.unshift(f),!0}}return!1}function a(e,t,n){var r=s(e,t,n);return r||(r=o(t,n)),r}function u(e,t,n,r){if(!n)return!0;var s=e||r;return!!s&&s(t,n,r)}e.exports=t.default});_e($e);var We=Be(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Array.isArray(t)||(t=t.length?(0,Ge.convertNodeList)(t):[t]);if(!t.length||t.some(function(e){return 1!==e.nodeType}))throw new Error('Invalid input - to compare HTMLElements its necessary to provide a reference of the selected node(s)! (missing "elements")');var i=(0,r.default)(t[0],n),o=e.replace(/> /g,">").split(/\s+(?=(?:(?:[^"]*"){2})*[^"]*$)/);if(o.length<2)return s("",e,"",t);var l=[o.pop()];for(;o.length>1;){var a=o.pop(),u=o.join(" "),c=l.join(" "),f=u+" "+c,h=document.querySelectorAll(f);h.length!==t.length&&l.unshift(s(u,a,c,t))}l.unshift(o[0]),(o=l)[0]=s("",o[0],o.slice(1).join(" "),t),o[o.length-1]=s(o.slice(0,-1).join(" "),o[o.length-1],"",t),i&&delete Fe.document;return o.join(" ").replace(/>/g,"> ").trim()};var n,r=(n=He)&&n.__esModule?n:{default:n};function s(e,t,n,r){if(e.length&&(e+=" "),n.length&&(n=" "+n),/\[*\]/.test(t)){var s=t.replace(/=.*$/,"]"),o=""+e+s+n;if(i(document.querySelectorAll(o),r))t=s;else for(var l=document.querySelectorAll(""+e+s),a=function(){var s=l[u];if(r.some(function(e){return s.contains(e)})){var a=s.tagName.toLowerCase();return o=""+e+a+n,i(document.querySelectorAll(o),r)&&(t=a),"break"}},u=0,c=l.length;u<c;u++){if("break"===a())break}}if(/>/.test(t)){var f=t.replace(/>/,"");o=""+e+f+n;i(document.querySelectorAll(o),r)&&(t=f)}if(/:nth-child/.test(t)){var h=t.replace(/nth-child/g,"nth-of-type");o=""+e+h+n;i(document.querySelectorAll(o),r)&&(t=h)}if(/\.\S+\.\S+/.test(t)){for(var d=t.trim().split(".").slice(1).map(function(e){return"."+e}).sort(function(e,t){return e.length-t.length});d.length;){var g=t.replace(d.shift(),"").trim();if(!(o=(""+e+g+n).trim()).length||">"===o.charAt(0)||">"===o.charAt(o.length-1))break;i(document.querySelectorAll(o),r)&&(t=g)}if((d=t&&t.match(/\./g))&&d.length>2){var m=document.querySelectorAll(""+e+t),p=function(){var s=m[u];if(r.some(function(e){return s.contains(e)})){var l=s.tagName.toLowerCase();return o=""+e+l+n,i(document.querySelectorAll(o),r)&&(t=l),"break"}};for(u=0,c=m.length;u<c;u++){if("break"===p())break}}}return t}function i(e,t){var n=e.length;return n===t.length&&t.every(function(t){for(var r=0;r<n;r++)if(e[r]===t)return!0;return!1})}e.exports=t.default});_e(We);var ze=Be(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getCommonAncestor=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).root,n=void 0===t?document:t,r=[];e.forEach(function(e,t){for(var s=[];e!==n;)e=e.parentNode,s.unshift(e);r[t]=s}),r.sort(function(e,t){return e.length-t.length});for(var s=r.shift(),i=null,o=function(){var e=s[l],t=r.some(function(t){return!t.some(function(t){return t===e})});if(t)return"break";i=e},l=0,a=s.length;l<a;l++){var u=o();if("break"===u)break}return i},t.getCommonProperties=function(e){var t={classes:[],attributes:{},tag:null};return e.forEach(function(e){var n,r,s,i,o=t.classes,l=t.attributes,a=t.tag;if(void 0!==o){var u=e.getAttribute("class");u?(u=u.trim().split(" "),o.length?(o=o.filter(function(e){return u.some(function(t){return t===e})})).length?t.classes=o:delete t.classes:t.classes=u):delete t.classes}if(void 0!==l&&(n=e.attributes,r=Object.keys(n).reduce(function(e,t){var r=n[t],s=r.name;return r&&"class"!==s&&(e[s]=r.value),e},{}),s=Object.keys(r),i=Object.keys(l),s.length?i.length?(l=i.reduce(function(e,t){var n=l[t];return n===r[t]&&(e[t]=n),e},{}),Object.keys(l).length?t.attributes=l:delete t.attributes):t.attributes=r:delete t.attributes),void 0!==a){var c=e.tagName.toLowerCase();a?c!==a&&delete t.tag:t.tag=c}}),t}});_e(ze);ze.getCommonAncestor,ze.getCommonProperties;var Ze=Be(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.getSingleSelector=l,t.getMultiSelector=a,t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.length&&!e.name)return a(e,t);return l(e,t)};var r=o(He),s=o($e),i=o(We);function o(e){return e&&e.__esModule?e:{default:e}}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(3===e.nodeType&&(e=e.parentNode),1!==e.nodeType)throw new Error('Invalid input - only HTMLElements or representations of them are supported! (not "'+(void 0===e?"undefined":n(e))+'")');var o=(0,r.default)(e,t),l=(0,s.default)(e,t),a=(0,i.default)(l,e,t);return o&&delete Fe.document,a}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Array.isArray(e)||(e=(0,Ge.convertNodeList)(e)),e.some(function(e){return 1!==e.nodeType}))throw new Error("Invalid input - only an Array of HTMLElements or representations of them is supported!");var n=(0,r.default)(e[0],t),s=l((0,ze.getCommonAncestor)(e,t),t),o=function(e){var t=(0,ze.getCommonProperties)(e),n=t.classes,r=t.attributes,s=t.tag,i=[];s&&i.push(s);if(n){var o=n.map(function(e){return"."+e}).join("");i.push(o)}if(r){var l=Object.keys(r).reduce(function(e,t){return e.push("["+t+'="'+r[t]+'"]'),e},[]).join("");i.push(l)}i.length;return[i.join("")]}(e)[0],a=(0,i.default)(s+" "+o,e,t),u=(0,Ge.convertNodeList)(document.querySelectorAll(a));return e.every(function(e){return u.some(function(t){return t===e})})?(n&&delete Fe.document,a):console.warn("\n      The selected elements can't be efficiently mapped.\n      Its probably best to use multiple single selectors instead!\n    ",e)}});_e(Ze);Ze.getSingleSelector,Ze.getMultiSelector;var Xe=Be(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.common=t.optimize=t.getMultiSelector=t.getSingleSelector=t.select=void 0,Object.defineProperty(t,"getSingleSelector",{enumerable:!0,get:function(){return Ze.getSingleSelector}}),Object.defineProperty(t,"getMultiSelector",{enumerable:!0,get:function(){return Ze.getMultiSelector}});var n=i(Ze),r=i(We),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(ze);function i(e){return e&&e.__esModule?e:{default:e}}t.select=n.default,t.optimize=r.default,t.common=s,t.default=n.default});_e(Xe);Xe.common,Xe.optimize,Xe.getMultiSelector,Xe.getSingleSelector;var Qe,Je=Xe.select;class Ke{constructor(){this.selectorName="css"}build(e,t,n){const r=n||new Ye,s=this;return function(e){if(!e)return e;const t=[];let n,r=!1;for(let s=0;s<e.length;s++){const i=e[s];'"'!==i||r||(void 0===n?n=s:(t.unshift({from:n,to:s}),n=void 0)),r="\\"===i&&!r}return t.forEach(t=>{e=e.slice(0,t.from)+"'"+function(e){let t=!1,n=0;const r=[];for(let s=0;s<e.length;s++){const i=e[s];"'"!==i||t||(r.push(e.slice(n,s)),r.push("\\'"),n=s+1),t="\\"===i&&!t}return r.push(e.slice(n)),r.join("")}(e.slice(t.from+1,t.to))+"'"+e.slice(t.to+1)}),e}(Je(t,{root:e||t.ownerDocument,ignore:{attribute:(t,n,i)=>!("id"!==t||!r.ignoreDynamicIds||!ne.isDynamicString(n,e))||(!("class"!==t||!r.ignoreUnsafeClasses||!s.isIgnoredClass(n.split(" ").map(e=>e.trim())))||i(t,n))}}))}getDefaultOptions(){return[{ignoreDynamicIds:!0,ignoreUnsafeClasses:!0}]}convertOptions(e){const t=new Ye;return Object.assign(t,e)}isIgnoredClass(e){return e.some(e=>/hover|over|^in$|active|inactive|selected|open|closed|focus|clearfix|enable|disable/i.test(e))}}class Ye{constructor(){this.selectorName="css",this.ignoreDynamicIds=!0,this.ignoreUnsafeClasses=!0}}class et{constructor(){this.selectorName="link-text"}build(e,t,n){return X(t)}getDefaultOptions(){return[{}]}convertOptions(e){return{selectorName:this.selectorName}}}!function(e){e[e.Nothing=0]="Nothing",e[e.Unique=1]="Unique",e[e.Ambiguous=2]="Ambiguous"}(Qe||(Qe={}));class tt{constructor(e,t,n){this.replaceWithDescOrSelf=e,this.startIndex=t,this.len=n}}class nt{constructor(){this.selectorName="rxpath",this.xpathCompatible=!1,this.useDocumentAsRoot=!1,this.costQuantile=.5,this.maxMatchLength=60,this.allowIndices=!0,this.allowAttributes=!0,this.allowUid=!0,this.allowText=!0,this.allowClass=!0,this.forceDeepLevelSkip=!1,this.ignoreDynamicIds=!0,this.relaxedIntermediateUniques=!1,this.usePartialClassNameMatching=!0,this.leftTrimPaths=!0,this.tagScore={html:0,body:0,head:0,"*":20,form:60,frame:80,iframe:80,map:50,menu:50,ol:60,select:60,table:60,ul:60,article:50,nav:60,section:60,customElements:100},this.attributeScore={id:200,smartid:120,innertext:140,pathname:125,href:120,media:105,ping:100,title:130,rel:100,type:100,target:100,name:150,action:145,method:135,src:100,alt:170,usemap:130,value:120,label:150,data:110,placeholder:100,required:100,wrap:100,icon:100,class:100,safeclass:120,role:160},this.attributeWeightRules={pathname(e,t){const n=ue(e,"pathname");return""===n||"/"===n?0:t}},this.attributeMaxLen={safeclass:150},this.resolveWeight=((e,t)=>{const n=this.attributeScore,r=this.attributeWeightRules;if(!n[t])return 0;if(!e||!r[t])return n[t]||0;const s=r[t];if("function"==typeof s)return s(e,n[t]);if("object"==typeof s){const n=ue(e,t);return n&&-1===s.valueBlacklist.indexOf(n)?s.defaultWeight:0}return 0})}}nt.instance=new nt;class rt{constructor(){this.selectorName="rxpath"}static useId(e,t){return!!e.allowUid&&(!(!t.id||/^\s+$/.test(t.id))&&(!e.ignoreDynamicIds||!ne.isDynamic(t)))}static buildElementPath(e,t,n){let r=t;const s=[],i=Object.assign({},nt.instance,n);for(;r&&(s.unshift(r),r!==e);){const e=r.parentElement;if(!e)break;r=e}const o=r;if(1===s.length)return new Ce(!0,[],null);(!i.xpathCompatible||i.xpathCompatible&&!i.useDocumentAsRoot)&&s.splice(0,1);const l=[],a=[];if(i.allowUid)for(let t=s.length-1;t>=0;t--){const n=s[t],r=n.getAttribute("id");if(rt.useId(i,n)){let i=null,o=-1;for(let e=t-1;e>=0;e--)if(he(s[e])||s[e].ownerDocument.documentElement===s[e]){o=e,i=s[e];break}if(-1===o){if(!e||!he(e)&&e.ownerDocument.documentElement!==e)break;o=-1,i=e}r&&i&&i.ownerDocument.getElementById(r)===n?(s.splice(o+1,t-o-1),l.push(s.length-o-2),a.push(r),t=o+1):console.debug("RxPathSelector: uid step was skipped because id '"+r+"' did not return the correct element.")}}let u=[];if(i.usePartialClassNameMatching){const e=function(e){const t=e.all,n=new Set;for(let e=-0;e<t.length;e++){const r=t[e].classList;r&&r.length>0&&Array.from(r).forEach(e=>n.add(e))}return Array.from(n).sort()}(t.ownerDocument);u=te.analyze(e).dynamicValues||[]}const c=[],f=[],h=[],d=[],g=[];let m=l.length-1;for(let e=0;e<s.length;e++){const t=s.length-1-e;l.indexOf(t)>=0?(d[e]=a[m],m--):d[e]=null}let p=s.length;const w=[];for(let e=0;e<s.length;e++)w[e]=!0,h[e]=0,f[e]=!1;const b=function(e,t){const n=[];n[e.length-1]=1e4;for(let r=0;r<e.length-1;r++)n[r]=lt(e[r],t);return n}(s,i);if(s.length>2){const e=[];for(let t=0;t<b.length-1;t++)e.push({index:t,score:b[t]});e.sort((e,t)=>t.score-e.score),p=Math.floor(i.costQuantile*e.length);for(let t=0;t<e.length;t++)w[e[t].index]=t<p}for(let e=0;e<s.length;e++)c[e]=0,d[e]||he(s[e])?g[e]=!0:g[e]=w[e];let v=new Ce(!1,[],null),y=-1,S=0;for(;;){y+=S,S=-1;for(let e=y+1;e<s.length;e++)if(g[e]){S=e-y;break}if(-1===S){v=st(s,0,s.length-1,c,f,h,d,g,i,u);break}let e=y+S,t=!1;c[e]=1;const n=(new Ue).apply;for(;;){let r;r=st(s,y+1,y+S,c,f,h,d,g,i,u);const l=y>=0?s[y]:o;let a;const m=r.optimize();let p;if((p=0===(a=i.xpathCompatible?n(l,m.toString(!0),!1):m.apply(l,!1)).length?Qe.Nothing:a.length>1?Qe.Ambiguous:Qe.Unique)===Qe.Nothing&&-1!==c[e]){c[e]=-1;continue}if(p===Qe.Nothing&&-1===c[e]){v=st(s,0,s.length-1,c,f,h,d,g,i,u);break}const w=e===s.length-1;if(p!==Qe.Unique||w&&0===c[e])if(p===Qe.Ambiguous&&f[e]&&-1!==c[e]){if(i.relaxedIntermediateUniques&&!w)break;e>0&&!g[e-1]&&S>1?(g[e-1]=!0,c[e]=1,h[e-=1]=0,S-=1,t=!1):c[e]=-1}else{if(p===Qe.Ambiguous&&-1===c[e]){v=st(s,0,s.length-1,c,f,h,d,g,i,u);break}t?h[e]=Math.max(0,h[e]-1):c[e]++}else{if(t||c[e]<2){v=st(s,y+1,y+S,c,f,h,d,g,i,u);break}t=!0,h[e]++}}}if(null===v||e&&e.parentElement||(v.absolute=!0),i.xpathCompatible)return v;if(i.leftTrimPaths){let t=v.clone(),n=0;for(let r=0;r<t.steps.length-2;r++){const s=t.clone();if(s.steps[r]=new Oe(s,Ne.DescendantOrSelf,null,!1),1!==s.apply(e,!1).length)break;n++,t=s}return t.steps=t.steps.slice(Math.max(0,n-1)),t}return v}build(e,t,n){return rt.buildElementPath(e,t,n).toString(!1)}getDefaultOptions(){const{ignoreDynamicIds:e,relaxedIntermediateUniques:t,usePartialClassNameMatching:n,leftTrimPaths:r}=nt.instance;return[{ignoreDynamicIds:e,relaxedIntermediateUniques:t,usePartialClassNameMatching:n,leftTrimPaths:r}]}convertOptions(e){return Object.assign({},nt.instance,e)}}function st(e,t,n,r,s,i,o,l,a,u){const c=new Ce(!1,[]),f=[];for(let h=t;h<=n;h++){const t=e[h];f[h]=c.steps.length;let n=new Oe(c,Ne.Child,fe(t),!1);if(o[h]){let e;e=a.xpathCompatible?new Te(c,xe.Equal,new De("id"),new Le(ae(o[h]))):new Te(c,xe.UniqueId,new Le(ae(o[h])),null),c.steps.push(new Oe(c,Ne.DescendantOrSelf,"",!1)),n.predicates.push(e),s[h]=!0}else if(l[h]){const e={flag:!1},o=[];for(const e of Array.from(t.attributes)){const n=e.nodeName;if("id"!==n||rt.useId(a,t)){if("class"===n){if(!a.allowClass)continue;if(a.xpathCompatible){if(ue(t,"safeclass")!==ue(t,"class"))continue;o.push("class")}else o.push("safeclass")}a.resolveWeight(t,n)&&o.push(n)}}if(a.xpathCompatible||(a.allowUid&&o.push("smartid"),o.push("pathname")),a.allowText&&o.push(a.xpathCompatible?"text()":"innertext"),o.sort((e,n)=>a.resolveWeight(t,n)-a.resolveWeight(t,e)),a.allowAttributes){let l=r[h],f=i[h];!a.allowIndices&&r[h]<0&&(l=1,f=0);const d=it(o,t,l,e,a);s[h]=e.flag;const g=ot(d,l,f,t,a,u);null!==g&&(g.setOwner(c),n.predicates.push(g))}else s[h]=!0}else n=new Oe(c,Ne.Child,"*",!1);c.steps.push(n)}const h=[];let d=-1;for(let e=t;e<=n;e++){if(l[e]){if(-1!==d){let n=d-t;const r=e-d;n=f[n],a.xpathCompatible||a.forceDeepLevelSkip||1!==r?h.push(new tt(!0,n,r)):h.push(new tt(!1,n,r))}d=-1}else-1===d&&(d=e)}h.reverse();for(const e of h){for(let t=0;t<e.len;t++)c.steps.splice(e.startIndex,1);e.replaceWithDescOrSelf?c.steps.splice(e.startIndex,0,new Oe(c,Ne.DescendantOrSelf,"",!1)):(c.steps.splice(e.startIndex,0,new Oe(c,Ne.Child,"",!0)),c.steps.splice(e.startIndex+1,0,new Oe(c,Ne.Child,"",!0)))}return c}function it(e,t,n,r,s){r.flag=!0;const i=[];for(const o of e){if(0>=n){r.flag=!1;break}if(s.xpathCompatible&&"text()"===o&&0===t.childElementCount){const e=t.textContent;if(e&&e.length>0&&e.length<=s.maxMatchLength){i.push({key:".",value:e});continue}}const e=s.xpathCompatible?t.getAttribute(o):ue(t,o);null!==e&&void 0!==e&&"data-fake"!==o&&i.push({key:o,value:e})}return i}function ot(e,t,n,r,s,i){if(s.allowIndices&&-1===t){if(!r.parentElement)return null;const e=new Ce(!0,[]);if(e.steps.push(new Oe(e,Ne.Child,fe(r),!1)),1===e.apply(r.parentElement,!1).length)return null;const t=se(r,fe(r))+1;return 0===t?null:new Te(e,xe.Index,new qe(t),null)}let o=null;for(let l=n;l<Math.min(e.length,t);l++){const t=e[l];let n;const a=s.attributeMaxLen[t.key]||s.maxMatchLength;if(s.usePartialClassNameMatching&&!s.xpathCompatible&&"safeclass"===t.key){const e=de(r,i);if(e){const r=e.toString();n=new Te(null,xe.Like,new De(t.key),new Me(r))}else n=null}else if(t.value.length<=a||s.xpathCompatible)n=new Te(null,xe.Equal,new De(t.key),new Le(ae(t.value)));else{const e=t.value.slice(0,a);n=new Te(null,xe.StartsWithString,new De(t.key),new Le(ae(e)))}o||(o=new ke(null,Ae.And,[])),n&&o.children.push(n)}return o&&1===o.children.length?o.children[0]:o}function lt(e,t){let n=0;const r=fe(e);let s;n+=s=t.tagScore[r]||(-1===r.indexOf("-")?t.tagScore["*"]:t.tagScore.customElements);for(const r of Array.from(e.attributes))r&&r.nodeValue&&r.nodeValue.length>0&&(s=t.resolveWeight(e,r.nodeName))>=100&&(n+=s-100);return n+=e.attributes.length}class at extends nt{constructor(){super(),this.xpathCompatible=!0,this.useDocumentAsRoot=!1}}at.instance=new at;class ut{constructor(){this.selectorName="xpath"}build(e,t,n){let r;(n=n||at.instance).xpathCompatible=!0;let s=rt.buildElementPath(e,t,n).toString(!1);for(;s!==r;)s=(r=s).replace("///","//");return r}getDefaultOptions(){const{ignoreDynamicIds:e,relaxedIntermediateUniques:t,useDocumentAsRoot:n}=at.instance;return[{ignoreDynamicIds:e,relaxedIntermediateUniques:t,useDocumentAsRoot:n}]}convertOptions(e){return Object.assign({},at.instance,e)}}class ct{constructor(e,t){if(this.builders=e,this.evaluators=t,this.highlightedElements=new Array,this.highlightStyle="orange dashed 2px",n.log("[rxsesut] ctor"),0===e.length&&0===t.length)throw new Error("no builders or evaluators registered")}getDefaultOptions(){if(0===this.builders.length)throw new Error("no builders registered");return this.builders.map(e=>({name:e.selectorName,options:e.getDefaultOptions()})).reduce((e,t)=>(e[t.name]=t.options,e),{})}buildSelectorsOfType(e,t,n){if(!e)throw new Error("invalid arg: elem");const r="string"==typeof t?this.builders.find(e=>e.selectorName===t):t;if(!r)throw new Error(`unknown builder: ${r}`);return n.map(t=>{t=Object.assign({},t,{useDocumentAsRoot:!0});const n=r.build(e.ownerDocument.documentElement,e,r.convertOptions(t)),s=this.tryApplySelector(e.ownerDocument.documentElement,n,r.selectorName),i=Array.isArray(s)?s.length:null;let o;return Array.isArray(s)&&s.length>0&&(o=$.guessNameForElement(s[0])||void 0),{matchingElements:i,options:t,selector:n,name:o}})}getElementPosition(e){e.scrollIntoView({behavior:"instant",block:"center",inline:"center"});const t=e.getBoundingClientRect();return{height:t.height,left:t.left,top:t.top,viewPortHeight:window.innerHeight,width:t.width}}buildSelectors(e,t){if(0===this.builders.length)throw new Error("no builders registered");if(!e)throw new Error("invalid arg: elem");return this.builders.map(n=>({name:n.selectorName,selectors:this.buildSelectorsOfType(e,n,t[n.selectorName])})).reduce((e,t)=>(e[t.name]=t.selectors,e),{})}autoEvaluateSelector(e,t,r=0){n.log("[rxsesut] try apply",e,r);let s={elements:[],selectorName:null};e&&(s=this.evaluators.reduce((n,r)=>{if(!t||t===r.selectorName)try{if(1!==n.elements.length){const t=this.applySelector(document.documentElement,e,r.selectorName);t.length>0&&(t.length<n.elements.length||n.elements.length<1)&&(n.elements=t,n.selectorName=r.selectorName)}}catch(e){}return n},{elements:[],selectorName:null}));let i=!1;if(null!==r&&s.elements.length>0){r=((e,t,n)=>e<t?n:e>n?t:e)(r,0,s.elements.length-1)||0;const e=s.elements[r];i=window.$0!==e,window.inspect(e),e.scrollIntoView&&e.scrollIntoView(!1)}return{inspectIndex:r,inspectedChanged:i,length:s.elements.length,selectorName:s.selectorName}}applySelector(e,t,n){const r=this.tryApplySelector(e,t,n);switch(r){case"noEval":throw new Error("no evaluators registered");case"unknownEval":throw new Error("unknown selector-type requested");default:return r}}buildHappySelectorOfType(e,t,n){if(0===this.builders.length)throw new Error("no builders registered");if(!e)throw new Error("invalid arg: elem");return this.buildSelectorsOfType(e,t,n).filter(e=>e.matchingElements&&e.matchingElements>0).sort((e=>(t,n)=>e(t)<e(n)?-1:e(n)<e(t)?1:0)(e=>e.matchingElements))[0]}buildHappySelector(e,t){if(n.log("[rxsesut] build happy for",e),0===this.builders.length)throw new Error("no builders registered");if(!e)throw new Error("invalid arg: elem");const r=this.buildSelectors(e,t),[s,i]=Object.entries(r).reduce((e,[t,n])=>e.concat(n.filter(e=>e.matchingElements>0).map(e=>[t,e])),[]).sort(([e,t],[n,r])=>t.matchingElements<r.matchingElements?-1:r.matchingElements<t.matchingElements?1:"css"===e?-1:"css"===n?1:0)[0];return n.log("[rxsesut] happy = ",i),i}highlightElementsBySelector(e,t){const n=this.tryApplySelector(document.documentElement,e,t);this.highlightElements(n)}unhighlightElements(){this.highlightedElements.forEach(e=>{e.element.style.setProperty("outline",e.originalOutline,e.originalPriority)}),this.highlightedElements=[]}highlightElements(e){this.unhighlightElements(),e&&(this.highlightedElements=e.map(e=>{const t=e.style.getPropertyValue("outline"),n=e.style.getPropertyPriority("outline");return e.style.setProperty("outline",this.highlightStyle,"important"),{element:e,originalOutline:t,originalPriority:n}}))}tryApplySelector(e,t,n){if(0===this.evaluators.length)return"noEval";const r=this.evaluators.filter(e=>e.selectorName===n);return 0===r.length?"unknownEval":r.map(n=>n.apply(e,t,!1)).reduce((e,t)=>e.concat(t),[])}}function ft(e){!function(e){e.RxSeSUT=new ct([new Ke,new et,new ut,new rt],[new W,new z,new Ue,new Ee])}(e);const t=e.RxSeSUT,r=new i(e.chrome),l=new s(e.chrome);let a;o.addWindowEventListener("mousedown",e=>{2===e.button&&e.srcElement&&(a={element:e.srcElement,time:(new Date).getTime()},l.sendMessageToBackground({elementInfo:{isLink:"A"===a.element.tagName},msg:"mouse-target-update"}))},!0),r.listenToBackgroundRequests("build-selector",e=>{if(!a)return;const n=t.getDefaultOptions();for(const t of Object.keys(n))for(const r of n[t])Object.assign(r,{ignoreDynamicIds:e.ignoreDynamicIds});const r=e.forcedSelectorType?t.buildHappySelectorOfType(a.element,e.forcedSelectorType,n[e.forcedSelectorType]):t.buildHappySelector(a.element,n);return l.sendMessageToBackground(Object.assign({msg:"provide-happy-result",time:a.time},r)),{}}),r.listenToBackgroundRequests("devtools-disconnected",e=>{t.unhighlightElements()}),l.sendMessageToBackground({msg:"init-content-script",selectorTypes:Object.keys(t.getDefaultOptions())}),e.chrome&&e.chrome.runtime.connect().onDisconnect.addListener(s=>{n.log("[inject] background has disconnected"),r.removeAllListeners(),o.removeAll(),t.unhighlightElements(),e.RxSeSUT=void 0})}return ft(window),e.initializeContentScript=ft,e}({});