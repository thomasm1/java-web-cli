var __decorate=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter=this&&this.__awaiter||function(e,t,i,o){return new(i||(i=Promise))(function(n,r){function a(e){try{c(o.next(e))}catch(e){r(e)}}function s(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){e.done?n(e.value):new i(function(t){t(e.value)}).then(a,s)}c((o=o.apply(e,t||[])).next())})};define("app",["require","exports","aurelia-framework","aurelia-logging","aurelia-store","shared/index","./data/actions/app-state","./data/actions/playground","./data/actions/selectors","./data/app-service","./data/chrome-service"],function(e,t,i,o,n,r,a,s,c,l,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const u=o.getLogger("devtools-ext");let p=class{constructor(e,t,i){this.store=e,this.chromeService=t,this.appService=i,this.platform="platform-windows",this.isDarkTheme=!1,this.subscriptions=[],this.languages=Object.entries(r.languages).map(e=>({key:e[0],label:e[1].label}))}attached(){return __awaiter(this,void 0,void 0,function*(){const e=window.navigator.platform.toLowerCase();if(chrome.devtools.network.onNavigated.addListener(e=>{this.store.dispatch(a.setContentScriptAvailable,!1)}),chrome.devtools.inspectedWindow.onResourceAdded.addListener(e=>__awaiter(this,void 0,void 0,function*(){if(e.url===`chrome-extension://${window.location.host}/scripts/inject-bundle.js`){const e=yield this.chromeService.isPageSupported();this.store.dispatch(a.setContentScriptAvailable,e),e&&this.store.dispatch(s.updateSelectorOptions,yield this.chromeService.getDefaultSelectorOptions())}})),e.indexOf("win")>-1&&(this.platform="platform-windows"),e.indexOf("mac")>-1&&(this.platform="platform-mac"),e.indexOf("linux")>-1&&(this.platform="platform-linux"),document.body.classList.add(this.platform),this.isDarkTheme=this.chromeService.isDarkMode(),this.isDarkTheme){const e=document.getElementById("theme-css");e&&(e.href=e.href.replace("light","dark"))}this.subscriptions.push(this.store.state.subscribe(e=>{u.info("new state:",e),this.state=e}));const t=this.chromeService.onSelectionChanged();this.subscriptions.push(this.appService.connectToAppConnectionState()),this.subscriptions.push(this.appService.connectToApp()),this.subscriptions.push(t.subscribe(e=>this.store.dispatch(c.setActiveSelectors,e))),this.subscriptions.push(yield this.connectToBackground());const i=yield this.chromeService.load("mainConfig");i&&this.store.dispatch(a.updateMainConfig,i,this.chromeService);const o=yield this.chromeService.isPageSupported();this.store.dispatch(a.setContentScriptAvailable,o),this.store.dispatch(s.updateSelectorOptions,yield this.chromeService.getDefaultSelectorOptions()),this.store.dispatch(c.setActiveSelectors,yield this.chromeService.buildSelectors())})}detached(){this.subscriptions.forEach(e=>e.unsubscribe())}updateUserSelector(e){u.debug("[main] update user selector",e),this.store.dispatch(s.inspectBySelector,{selector:e})}toggleSelectorState(e){this.store.dispatch(c.toggleSelectorState,e)}updateMainConfig(e){this.store.dispatch(a.updateMainConfig,e,this.chromeService)}connectToBackground(){return __awaiter(this,void 0,void 0,function*(){return yield this.chromeService.connectListenerToBackground((e,t)=>__awaiter(this,void 0,void 0,function*(){if(u.debug("[main] received message from bg",e),h(e)&&"update-user-selector"===e.msg){if(!e.selector)throw new Error(`malformed msg '${e}': missing field 'selector'.`);u.debug("[main] trigger user selector update from bg"),this.updateUserSelector(e.selector.selector)}if(h(e)&&"tab-activated"===e.msg&&(yield this.chromeService.sendMessageToBackground("connection-state-changed",this.state.appConnection)),h(e)&&"send-selector-to-app"===e.msg){if(!e.selector)throw new Error(`malformed msg '${e}': missing field 'selector'.`);u.debug("[main] trigger user selector update from bg");try{yield this.appService.sendSelectorToApp({elementFilePath:e.selector.elementFilePath,listView:{expanded:!1},matchingElements:1,name:e.selector.name,selector:e.selector.selector,strategy:e.id}),this.chromeService.showNotification(r.guid(),"../images/icons/notification-send-success.svg",`'${e.selector.name}' has been added to the active Page Object file.`,"Selector sent successfully")}catch(e){this.chromeService.showNotification(r.guid(),"../images/icons/notification-send-fail.svg",e.message,"Sending selector failed")}}return!1}))})}};function h(e){return"object"==typeof e&&"string"==typeof e.msg}p=__decorate([i.autoinject(),__metadata("design:paramtypes",[n.Store,d.ChromeService,l.AppService])],p),t.App=p}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!0,testing:!0}});__awaiter=this&&this.__awaiter||function(e,t,i,o){return new(i||(i=Promise))(function(n,r){function a(e){try{c(o.next(e))}catch(e){r(e)}}function s(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){e.done?n(e.value):new i(function(t){t(e.value)}).then(a,s)}c((o=o.apply(e,t||[])).next())})};define("main",["require","exports","aurelia-store","./data/state-models","./data/store-utils","./environment"],function(e,t,i,o,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.configure=function(e){return __awaiter(this,void 0,void 0,function*(){e.use.defaultBindingLanguage().defaultResources().eventAggregator(),e.use.plugin("aurelia-dialog").plugin("aurelia-store",{initialState:n.shallowClone(o.INITIAL_STATE,{mainConfig:n.shallowClone(o.INITIAL_STATE.mainConfig,yield function(){return __awaiter(this,void 0,void 0,function*(){if(chrome&&chrome.extension&&chrome.extension.inIncognitoContext)return{};const e=new Promise(e=>chrome.storage.local.get(t=>e(t.mainConfig)));return e||{}})}())}),logDefinitions:{dispatchedActions:i.LogLevel.debug},logDispatchedActions:!0}),r.default.debug&&e.use.developmentLogging(),r.default.testing&&e.use.plugin("aurelia-testing"),e.use.feature("./custom-elements"),e.start().then(()=>e.setRoot())})}});__decorate=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter=this&&this.__awaiter||function(e,t,i,o){return new(i||(i=Promise))(function(n,r){function a(e){try{c(o.next(e))}catch(e){r(e)}}function s(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){e.done?n(e.value):new i(function(t){t(e.value)}).then(a,s)}c((o=o.apply(e,t||[])).next())})};define("banner/banner",["require","exports","aurelia-framework","aurelia-store","../data/actions/app-state","../data/chrome-service"],function(e,t,i,o,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let a=class{constructor(e,t){this.store=e,this.chromeService=t}get isDarkTheme(){return this.chromeService.isDarkMode()}get isBannerDismissed(){return this.state&&this.state.mainConfig&&this.state.mainConfig.bannerDismissed===n.CURRENT_BANNER_ID}attached(){return __awaiter(this,void 0,void 0,function*(){this.store.state.subscribe(e=>{this.state=e})})}dismissBanner(){this.store.dispatch(n.dismissBanner,this.chromeService)}};__decorate([i.computedFrom("state"),__metadata("design:type",Boolean),__metadata("design:paramtypes",[])],a.prototype,"isBannerDismissed",null),a=__decorate([i.autoinject(),__metadata("design:paramtypes",[o.Store,r.ChromeService])],a),t.Banner=a}),define("custom-elements/index",["require","exports","./configuration-panel/configuration-panel","./dropdown-box/dropdown-box","./editable-text-field/editable-text-field","./labeled-checkbox/labeled-checkbox","./tree-outline/tree-outline","./tree-outline/tree-outline-item","./notification-box/notification-box"],function(e,t,i,o,n,r,a,s,c){"use strict";function l(e){for(var i in e)t.hasOwnProperty(i)||(t[i]=e[i])}Object.defineProperty(t,"__esModule",{value:!0}),t.configure=function(e){e.globalResources(["./configuration-panel/configuration-panel","./dropdown-box/dropdown-box","./editable-text-field/editable-text-field","./labeled-checkbox/labeled-checkbox","./tree-outline/tree-outline","./tree-outline/tree-outline-item","./notification-box/notification-box"])},l(i),l(o),l(n),l(r),l(a),l(s),l(c)});__decorate=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter=this&&this.__awaiter||function(e,t,i,o){return new(i||(i=Promise))(function(n,r){function a(e){try{c(o.next(e))}catch(e){r(e)}}function s(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){e.done?n(e.value):new i(function(t){t(e.value)}).then(a,s)}c((o=o.apply(e,t||[])).next())})};define("data/app-service",["require","exports","aurelia-framework","aurelia-store","shared/guid","rxjs/operators","./actions/app-state","./chrome-service","./reconnecting-socket"],function(e,t,i,o,n,r,a,s,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let l=class{constructor(e,t){this.store=e,this.chromeService=t,this.wsClient=new c.ReconnectingSocket("ws://localhost:3000"),this.logger=i.LogManager.getLogger("RxSeStore")}connectToApp(){return this.wsClient.subscribe(e=>{this.messageReceived(e)},e=>{this.logger.error("wss-error",e)})}connectToAppConnectionState(){return this.wsClient.connectionState.subscribe(e=>{this.store.dispatch(a.setAppConnectionState,e,this.chromeService)})}reconnectToApp(){this.wsClient.reconnect()}disconnectFromApp(){this.wsClient.disconnect()}sendSelectorToApp(e){return __awaiter(this,void 0,void 0,function*(){const t=yield this.chromeService.takeScreenshot(),i=yield this.sendRequest({action:"sendSelectorToApp",payload:{elementFilePath:e.elementFilePath,image:t,name:e.name,selector:e.selector,strategy:e.strategy},transactionId:n.guid()});if("success"!==i.type)throw new Error(i.msg);return i.transactionId})}messageReceived(e){return __awaiter(this,void 0,void 0,function*(){this.logger.info("wss-info",e),e.hasOwnProperty("action")&&this.handleRequest(e)})}handleRequest(e){return __awaiter(this,void 0,void 0,function*(){switch(e.action){case"sendElementToExtension":yield this.store.dispatch(a.setReceivedElement,this.chromeService,e.payload);break;case"getCapabilities":this.store.dispatch(a.setAppConnectionCapabilities,e.payload),this.wsClient.sendResponse({payload:{editSelector:!0,version:this.chromeService.getVersion()},transactionId:e.transactionId,type:"getCapabilities"})}})}sendRequest(e,t=c.TIMEOUT_WEBSOCKET_REPLY_WAIT){return __awaiter(this,void 0,void 0,function*(){return this.wsClient.sendRequest(e),yield this.wsClient.pipe(r.filter(t=>t.transactionId===e.transactionId),r.timeout(t),r.take(1)).toPromise()})}};l=__decorate([i.autoinject(),__metadata("design:paramtypes",[o.Store,s.ChromeService])],l),t.AppService=l});__decorate=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter=this&&this.__awaiter||function(e,t,i,o){return new(i||(i=Promise))(function(n,r){function a(e){try{c(o.next(e))}catch(e){r(e)}}function s(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){e.done?n(e.value):new i(function(t){t(e.value)}).then(a,s)}c((o=o.apply(e,t||[])).next())})};define("data/chrome-service",["require","exports","aurelia-framework","aurelia-logging","aurelia-store","rxjs","rxjs/operators","../util/retry","./state-models","./store-utils"],function(e,t,i,o,n,r,a,s,c,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let d=class{constructor(e){this.chrome=window.chrome,this.logger=o.getLogger("chrome-service"),this.subscriptions=[],this.subscriptions.push(e.state.subscribe(e=>this.mainConfig=l.shallowClone(e.mainConfig)))}getVersion(){return this.chrome.runtime.getManifest().version}isDarkMode(){return this.chrome&&this.chrome.devtools&&this.chrome.devtools.panels&&"dark"===this.chrome.devtools.panels.themeName}isIncognito(){return this.chrome&&this.chrome.extension&&this.chrome.extension.inIncognitoContext}isPageSupported(){return __awaiter(this,void 0,void 0,function*(){try{const e=yield this.performEvalInWindow("window.location.protocol",{topOnly:!0},e=>e);return!!e&&(e.startsWith("http:")||e.startsWith("https:")||e.startsWith("file:"))}catch(e){return!1}})}getMergedBaseOptions(){return __awaiter(this,void 0,void 0,function*(){const e=Object.assign({},yield this.getDefaultOptions()),t=yield this.getMainConfig();if(t)for(const i of Object.keys(e))for(const o of e[i])Object.assign(o,t);return e})}buildSelectors(e){return __awaiter(this,void 0,void 0,function*(){const t=yield this.getMergedBaseOptions();e&&Object.assign(t,e);try{return yield this.evalInWindow(`window.RxSeSUT.buildSelectors($0, ${JSON.stringify(t)})`,e=>this.selectorDictionaryToArray(e))}catch(e){if(e instanceof Error&&"All frames failed to evaluate"===e.message)return[];throw e}})}autoEvaluateSelector(e,t,i=0){return __awaiter(this,void 0,void 0,function*(){this.logger.debug("[cs] try apply",e,i);try{const o=this.waitForInspect(),n=yield this.performEvalInWindow("window.RxSeSUT.autoEvaluateSelector"+`(${JSON.stringify(e)}, ${JSON.stringify(t)}, ${i})`,{retryCount:0,waitTime:0},e=>{if(!e||!e.length||0===e.length)throw new Error("no results found in current frame");return e});return n.inspectedChanged&&(yield o),n.length>0?this.highlightElements({selector:e,strategy:n.selectorName}):this.unhighlightElements(),n}catch(e){if(this.unhighlightElements(!0),e instanceof Error&&"All frames failed to evaluate"===e.message)return{inspectIndex:0,inspectedChanged:!1,length:0,selectorName:""};throw e}})}copyToClipboard(e){const t=`copy(${JSON.stringify(e)})`;return this.evalInWindow(t,e=>!0===e)}takeScreenshot(){return __awaiter(this,void 0,void 0,function*(){const e=yield this.focusAndGetElement(),t=this.chrome.devtools.inspectedWindow.tabId;return new Promise(i=>{this.chrome.tabs.get(t,o=>{this.chrome.tabs.update(t,{active:!0}),this.chrome.tabs.captureVisibleTab(o.windowId,{},t=>__awaiter(this,void 0,void 0,function*(){const o=new Image;o.src=t,t=yield this.getImagePortion(o,e),i(t)}))})})})}getImagePortion(e,t){return __awaiter(this,void 0,void 0,function*(){return new Promise(i=>{e.onload=(()=>{const o=e.naturalHeight,n=e.naturalWidth,r=o/t.viewPortHeight;t.top*=r,t.left*=r,t.width*=r,t.height*=r;let a=.1*t.width,s=.1*t.height;a=Math.max(a,80-(.5*t.width+a)),s=Math.max(s,50-(.5*t.height+s));let c=Math.max(0,t.left-a),l=Math.max(0,t.top-s);const d=Math.min(n,t.left+t.width+a),u=Math.min(o,t.top+t.height+s);let p=d-c,h=u-l;p/h>1.6?(h=Math.min(o,p/1.6),l=this.clamp(.5*(l+u-h),0,o-h)):p/h<1.6&&(p=Math.min(n,1.6*h),c=this.clamp(.5*(c+d-p),0,n-p));const f=document.createElement("canvas"),m=f.getContext("2d");f.width=p,f.height=h;const g=document.createElement("canvas"),_=g.getContext("2d");if(!_||!m)return i("");g.width=e.width,g.height=e.height,_.drawImage(e,0,0),m.drawImage(g,c,l,p,h,0,0,p,h),i(f.toDataURL())})})})}clamp(e,t,i){return e<=t?t:e>=i?i:e}focusAndGetElement(){return __awaiter(this,void 0,void 0,function*(){return yield this.evalInWindow("window.RxSeSUT.getElementPosition($0)",e=>e)})}highlightElements(e){return __awaiter(this,void 0,void 0,function*(){if(!this.mainConfig.enableHighlighting)return;const t="window.RxSeSUT.highlightElementsBySelector("+`${JSON.stringify(e.selector)}, ${JSON.stringify(e.strategy)})`;return yield this.performEvalInAllFrames(t)})}unhighlightElements(e=!1){return __awaiter(this,void 0,void 0,function*(){if(!e&&!this.mainConfig.enableHighlighting)return;return this.performEvalInAllFrames("window.RxSeSUT.unhighlightElements()")})}onSelectionChanged(){return new r.Observable(e=>{const t=()=>__awaiter(this,void 0,void 0,function*(){try{this.unhighlightElements();const t=yield this.buildSelectors();e.next(t)}catch(e){this.logger.debug("onSelectionChanged failed",e)}});return this.chrome.devtools.panels.elements.onSelectionChanged.addListener(t),()=>{this.chrome.devtools.panels.elements.onSelectionChanged.removeListener(t)}})}getDefaultOptions(){return __awaiter(this,void 0,void 0,function*(){this.defaultOptions=this.defaultOptions||(yield this.evalInWindow("window.RxSeSUT.getDefaultOptions()",e=>e));const e=Object.assign({},this.defaultOptions);for(const t of Object.keys(e))e[t]=e[t].map(e=>Object.assign({},e));return e})}getDefaultSelectorOptions(){return __awaiter(this,void 0,void 0,function*(){const e=[];e.push({label:c.defaultAutoDetectLabel,value:c.autoDetectValue});try{const t=yield this.getDefaultOptions();Object.keys(t).forEach(t=>e.push({label:t,value:t}))}catch(e){}return e})}connectListenerToBackground(e){const t=chrome.runtime.connect();return t.onMessage.addListener(e),t.postMessage({msg:"set-up",tabId:window.chrome.devtools.inspectedWindow.tabId}),new r.Subscription(()=>t.disconnect())}sendMessageToBackground(e,t){return __awaiter(this,void 0,void 0,function*(){chrome.runtime.sendMessage({msg:"connection-state-changed",request:t})})}getMainConfig(){return __awaiter(this,void 0,void 0,function*(){return(yield this.load("mainConfig"))||{}})}load(e){return __awaiter(this,void 0,void 0,function*(){if(!this.isIncognito())return new Promise(t=>chrome.storage.local.get(i=>t(i[e])))})}persist(e,t){return __awaiter(this,void 0,void 0,function*(){if(!this.isIncognito())return yield new Promise(i=>chrome.storage.local.set({[e]:t},i))})}evalInWindow(e,t){return this.performEvalInWindow(e,{retryCount:10,waitTime:100},t)}copySelectorToClipboard(e){const{copyWithQuotes:t}=this.mainConfig,i=t?JSON.stringify(e):e;this.copyToClipboard(i)}askForNotificationPermissions(){return new Promise((e,t)=>{this.chrome.permissions.request({permissions:["notifications"]},i=>{i&&e(!0),t(!1)})})}showNotification(e,t,i,o){this.chrome.notifications&&this.chrome.notifications.create(e,{iconUrl:t,message:i,title:o,type:"basic"},()=>{})}evaluate(e,t={useContentScriptContext:!0},i){return new Promise((o,n)=>{this.chrome.devtools.inspectedWindow.eval(e,t,(e,t)=>{if(t)t.isException?n(new Error(t.value)):t.isError?n(new Error([t.description,...t.details].join(","))):(this.logger.debug("unexpected error type in evalInWindow",t),n(t));else try{o(i(e))}catch(e){n(e)}})})}performEvalInAllFrames(e){return __awaiter(this,void 0,void 0,function*(){const t=yield this.getAllFrameUrls();yield Promise.all(t.map(t=>this.evaluate(e,{useContentScriptContext:!0,frameURL:t},e=>e)))})}performEvalInWindow(e,t={},i){const o=Object.assign({retryCount:0,retryCountInSubFrames:0,topOnly:!1,waitTime:100},t);return s.retry(o.retryCount,o.waitTime,()=>this.evaluate(e,{useContentScriptContext:!0},i)).catch(()=>__awaiter(this,void 0,void 0,function*(){if(!t.topOnly){const t=(yield this.getAllFrameUrls()).slice(0,-1);for(const n of t)try{return yield s.retry(o.retryCountInSubFrames,o.waitTime,()=>this.evaluate(e,{useContentScriptContext:!0,frameURL:n},i))}catch(e){}}throw new Error("All frames failed to evaluate")}))}selectorDictionaryToArray(e){return Object.entries(e).map(e=>e[1].filter(e=>e.selector&&e.matchingElements&&e.matchingElements>0).map(t=>({listView:{expanded:!1},matchingElements:t.matchingElements,name:t.name,selector:t.selector,strategy:e[0]})).reduce((e,t)=>e.some(e=>e.selector===t.selector)?e:e.concat(t),[])).reduce((e,t)=>e.concat(t),[])}getAllFrameUrls(){return new Promise(e=>this.chrome.devtools.inspectedWindow.getResources(t=>e(t.filter(e=>"document"===e.type).map(e=>e.url))))}waitForInspect(){return new Promise(e=>__awaiter(this,void 0,void 0,function*(){r.zip(r.fromEvent(window,"blur"),r.fromEventPattern(e=>this.chrome.devtools.panels.elements.onSelectionChanged.addListener(e),e=>this.chrome.devtools.panels.elements.onSelectionChanged.removeListener(e))).pipe(a.take(1),a.timeout(5e3)).subscribe(()=>__awaiter(this,void 0,void 0,function*(){yield s.waitFor(0),e()}),()=>e())}))}};d=__decorate([i.autoinject(),__metadata("design:paramtypes",[n.Store])],d),t.ChromeService=d});__awaiter=this&&this.__awaiter||function(e,t,i,o){return new(i||(i=Promise))(function(n,r){function a(e){try{c(o.next(e))}catch(e){r(e)}}function s(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){e.done?n(e.value):new i(function(t){t(e.value)}).then(a,s)}c((o=o.apply(e,t||[])).next())})};define("data/reconnecting-socket",["require","exports","rxjs"],function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=3e3,n=3200,r=20;class a extends i.Subject{constructor(e,t,o){super(),this.url=e,this.socket=null,this.autoReconnect=!1,this.cancelConnection=!1,this.resultSelector=t||a.defaultResultSelector,this.serializer=o||a.defaultSerializer,this.connectionStateSubject=new i.Subject,this.connectionState=this.connectionStateSubject.asObservable()}static defaultResultSelector(e){return JSON.parse(e.data)}static defaultSerializer(e){return JSON.stringify(e)}reconnect(){return __awaiter(this,void 0,void 0,function*(){this.socket=null,this.connectionStateSubject.next("connecting");try{this.autoReconnect=!0,this.socket=yield this.openInRange(o,n),this.socket&&this.connectionStateSubject.next("connected")}catch(e){console.log("Failed to connect",e),this.connectionStateSubject.next("disconnected"),this.autoReconnect=!1}})}disconnect(){return __awaiter(this,void 0,void 0,function*(){this.autoReconnect=!1,this.cancelConnection=!0,this.socket&&(this.socket.close(),this.connectionStateSubject.next("disconnected"),this.cancelConnection=!1)})}cancel(){return __awaiter(this,void 0,void 0,function*(){yield this.disconnect(),this.cancelConnection=!1,this.connectionStateSubject.next("disconnected")})}sendRequest(e){if(!this.socket)throw new Error("invalid_op: socket not available");this.socket.send(this.serializer(e))}sendResponse(e){if(!this.socket)throw new Error("invalid_op: socket not available");this.socket.send(this.serializer(e))}openInRange(e,t){return __awaiter(this,void 0,void 0,function*(){for(let i=e;i<t;i+=r){try{const e=this.parallelOpen(i,Math.min(i+r,t));return yield this.firstSuccessfull(e)}catch(e){}if(this.cancelConnection)return yield this.cancel(),null}throw new Error("All ports exhausted")})}firstSuccessfull(e){return new Promise((t,i)=>{const o=[];for(const n of e)n.then(t).catch(t=>{o.push(n),o.length===e.length&&i(t)})})}parallelOpen(e,t){const i=[];for(let o=e;o<t;o++)i.push(this.open(o));return i}open(e){return __awaiter(this,void 0,void 0,function*(){const t=new URL(this.url);t.port=`${e}`;const i=new WebSocket(t.toString());let o=!1;return new Promise((e,t)=>{i.addEventListener("close",e=>{if(o&&this.socket===i&&this.autoReconnect)this.reconnect();else{const i=new Error("Failed to open socket: "+e);i.data=e,t(i)}}),i.addEventListener("error",e=>{o&&console.log("error in open connection",e)}),i.addEventListener("message",e=>{this.socket===i&&this.next(this.resultSelector(e))}),i.addEventListener("open",()=>{o=!0,e(i)})})})}}t.ReconnectingSocket=a,t.TIMEOUT_WEBSOCKET_REPLY_WAIT=1e4}),define("data/state-models",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultAutoDetectLabel="auto-detect",t.autoDetectValue="auto-detect",t.INITIAL_STATE={activeLanguage:"csharp",activeSelectors:[],appConnection:"disconnected",contentScriptAvailable:!0,isDebugMode:window.navigator.webdriver,mainConfig:{bannerDismissed:!1,copyWithQuotes:!1,enableHighlighting:!0,ignoreDynamicIds:!0,leftTrimPaths:!0,relaxedIntermediateUniques:!1,usePartialClassNameMatching:!0},playground:{currentElementIndex:0,currentHistoryIndex:null,forcedStrategy:t.defaultAutoDetectLabel,foundStrategy:"",history:[],numberOfFoundElements:0,selector:"",selectorOptions:[{label:t.defaultAutoDetectLabel,value:t.autoDetectValue}],selectorState:null}}}),define("data/store-utils",["require","exports","aurelia-framework","aurelia-store"],function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shallowClone=function(e,...t){return Object.assign({},e,...t)},t.assign=function(e,...t){return Object.assign(e,...t)},t.registerToStore=function(...e){if(i.Container.instance){const t=i.Container.instance.get(o.Store);e.forEach(e=>{t.registerAction(e.name,e)})}}}),define("inject/inject-api",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})});__decorate=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("playground/element-edit",["require","exports","aurelia-framework","aurelia-store","../data/actions/app-state"],function(e,t,i,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=class{constructor(e){this.store=e}removeElement(){this.store.dispatch(n.setCurrentElement,void 0)}};__decorate([i.bindable(),__metadata("design:type",Object)],r.prototype,"element",void 0),r=__decorate([i.autoinject(),__metadata("design:paramtypes",[o.Store])],r),t.ElementEdit=r});__decorate=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter=this&&this.__awaiter||function(e,t,i,o){return new(i||(i=Promise))(function(n,r){function a(e){try{c(o.next(e))}catch(e){r(e)}}function s(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){e.done?n(e.value):new i(function(t){t(e.value)}).then(a,s)}c((o=o.apply(e,t||[])).next())})};define("playground/evaluation-box",["require","exports","aurelia-dialog","aurelia-framework","aurelia-store","aurelia-templating","../custom-elements/dialogs/dialogs","../data/actions/history","../data/actions/playground","../data/actions/playground","../data/app-service","../data/chrome-service","../ui-tools/key-codes"],function(e,t,i,o,n,r,a,s,c,l,d,u,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let h=class{constructor(e,t,i,o,n){this.store=e,this.taskQueue=t,this.chromeService=i,this.appService=o,this.dialogService=n,this.appConnection="disconnected",this.selector={currentElementIndex:0,currentHistoryIndex:null,forcedStrategy:null,foundStrategy:"",history:[],numberOfFoundElements:0,selector:"",selectorOptions:[],selectorState:null},this.inputHasFocus=!1,this.lastSearchSelector=null,this.lastForcedStrategy=null}onKeyUp(e){return e.keyCode===p.KeyCodes.Enter?(this.saveCaretPosition(),this.checkAndUpdateLastSelectorState()?(this.saveHistoryItem(),this.inspectFirst()):e.shiftKey?this.inspectPrevious():this.inspectNext()):e.keyCode!==p.KeyCodes.ArrowDown||e.shiftKey?e.keyCode!==p.KeyCodes.ArrowUp||e.shiftKey||(e.preventDefault(),this.historyGoBack()):(e.preventDefault(),this.historyGoForward()),!0}get canSendPlaygroundSelectorToApp(){return this.selector&&this.selector.selector.length&&!this.disableControls&&"connected"===this.appConnection&&"rxpath"!==this.selector.foundStrategy}submitButton(){return __awaiter(this,void 0,void 0,function*(){this.checkAndUpdateLastSelectorState()&&this.saveHistoryItem(),yield this.inspectFirst()})}saveHistoryItem(){this.selector&&this.selector.selector&&this.store.dispatch(s.saveHistoryItem,this.selector.selector)}historyGoBack(){this.currentHistoryItemIsModifiedInternal()?this.store.dispatch(s.goToLastHistoryItem):this.store.dispatch(s.goBackInHistory)}historyGoForward(){this.currentHistoryItemIsModifiedInternal()||this.store.dispatch(s.goForwardInHistory)}currentHistoryItemIsModified(e,t,i){return null!==t&&e!==i[t].value}getCountModifier(e,t){const i="evaluation-box__count--";if(!t||"number"!=typeof e)return i+"grey";if(0===e)return i+"red";if(1===e)return i+"green";if(1<e&&e<=9)return i+"yellow";if(e>9)return i+"red";throw new Error("defect: cases should have been exhaustive")}getSubmitActiveModifier(e,t){return e&&e.length>0&&!t?"evaluation-box__btn-submit--active":""}inspectFirst(){return __awaiter(this,void 0,void 0,function*(){yield this.store.dispatch(c.inspectFirstMatchingElement,this.chromeService)})}inspectPrevious(){this.store.dispatch(c.inspectPreviousMatchingElement,this.chromeService)}inspectNext(){this.store.dispatch(c.inspectNextMatchingElement,this.chromeService)}copyValueToClipboard(){this.chromeService.copySelectorToClipboard(this.selector?this.selector.selector:"")}selectorChanged(e){if(e)switch(e.selectorState){case"focusing":this.store.dispatch(l.focusing,window);break;case"focused":this.inputHasFocus=!0,this.restoreCaretPosition()}}handleXButton(e){const t=!!this.selector.selector;return this.taskQueue.queueTask(()=>{""===this.selector.selector&&t&&this.submitButton()}),!0}setForcedStrategy(e){this.store.dispatch(l.updatePlaygroundState,{forcedStrategy:e})}setNotificationSettings(e){this.notificationSettings=e}sendSelectorToApp(e){return __awaiter(this,void 0,void 0,function*(){if(yield this.submitButton(),!this.selector)return void(yield a.showConfirmDialog(this.dialogService,{cancelable:!1,message:"Invalid selector"}));const e={elementFilePath:this.selector.elementFilePath,listView:{expanded:!1},matchingElements:this.selector.numberOfFoundElements,name:this.element?this.element.name:this.selector.numberOfFoundElements&&this.activeSelectors[0]?this.activeSelectors[0].name:"New_element",selector:this.selector.selector,strategy:this.selector.foundStrategy||this.selector.forcedStrategy};if(e.matchingElements||"auto-detect"!==e.strategy){if(!e.matchingElements||e.matchingElements>1){const t=e.matchingElements>1?"more than one":"no";if((yield a.showConfirmDialog(this.dialogService,{message:`The selector you are trying to send has ${t} matching element.\n         Are you sure you want to send it anyway?`,options:[{value:"ok",label:"Send anyway"}]})).wasCancelled)return}try{yield this.appService.sendSelectorToApp(e),this.setNotificationSettings({description:`‘${e.name}’ has been added to the active Page Object file.`,icon:"images/icons/success-icon.svg",title:"Selector sent successfully"})}catch(e){this.setNotificationSettings({description:e,icon:"images/icons/fail-icon.svg",title:"Sending selector failed"})}}else yield a.showConfirmDialog(this.dialogService,{cancelable:!1,message:"No elements are found. Select evaluation type (auto-detect not allowed)."})})}checkAndUpdateLastSelectorState(){const e=this.selector?this.selector.selector:null,t=this.selector?this.selector.forcedStrategy:null;return(this.lastSearchSelector!==e||this.lastForcedStrategy!==t)&&(this.lastSearchSelector=e,this.lastForcedStrategy=t,!0)}saveCaretPosition(){const e=this.evaluationBoxInput;e&&"number"==typeof e.selectionStart&&(this.caretPositionStart=e.selectionStart,this.caretPositionEnd=e.selectionEnd)}restoreCaretPosition(){const e=this.evaluationBoxInput;e&&"number"==typeof e.selectionStart&&(null!==this.caretPositionStart?(e.selectionStart=this.caretPositionStart,e.selectionEnd=this.caretPositionEnd,this.caretPositionStart=this.caretPositionEnd=null):e.selectionStart=e.selectionEnd=e.value.length)}currentHistoryItemIsModifiedInternal(){return this.currentHistoryItemIsModified(this.selector.selector,this.selector.currentHistoryIndex,this.selector.history)}};__decorate([r.bindable(),__metadata("design:type",String)],h.prototype,"appConnection",void 0),__decorate([r.bindable(),__metadata("design:type",Object)],h.prototype,"activeLanguage",void 0),__decorate([r.bindable(),__metadata("design:type",Array)],h.prototype,"activeSelectors",void 0),__decorate([r.bindable(),__metadata("design:type",Object)],h.prototype,"disableControls",void 0),__decorate([r.bindable(),__metadata("design:type",Object)],h.prototype,"selector",void 0),__decorate([r.bindable(),__metadata("design:type",Object)],h.prototype,"element",void 0),__decorate([o.computedFrom("selector","selector.selector","disableControls","appConnection","sendDisabled"),__metadata("design:type",Object),__metadata("design:paramtypes",[])],h.prototype,"canSendPlaygroundSelectorToApp",null),h=__decorate([o.autoinject(),__metadata("design:paramtypes",[n.Store,o.TaskQueue,u.ChromeService,d.AppService,i.DialogService])],h),t.EvaluationBox=h});__decorate=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("playground/playground-main",["require","exports","aurelia-templating"],function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class o{}__decorate([i.bindable(),__metadata("design:type",Object)],o.prototype,"data",void 0),__decorate([i.bindable(),__metadata("design:type",Object)],o.prototype,"disableControls",void 0),__decorate([i.bindable(),__metadata("design:type",Object)],o.prototype,"activeLanguage",void 0),__decorate([i.bindable(),__metadata("design:type",Object)],o.prototype,"activeSelectors",void 0),__decorate([i.bindable(),__metadata("design:type",Object)],o.prototype,"appConnection",void 0),__decorate([i.bindable(),__metadata("design:type",Object)],o.prototype,"element",void 0),__decorate([i.bindable(),__metadata("design:type",Object)],o.prototype,"isDebugMode",void 0),t.PlaygroundMain=o});__decorate=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("selector-generator/selector-list-item",["require","exports","aurelia-framework","aurelia-store","../data/actions/playground","../data/chrome-service"],function(e,t,i,o,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let a=class{constructor(e,t){this.store=e,this.chromeService=t,this.appConnection="disconnected"}countColorClass(e){const t="selector-item__score--";if("number"!=typeof e)return t+"grey";if(1===e)return t+"green";if(e>9||0===e)return t+"red";if(e>1&&e<=9)return t+"yellow";throw new Error("defect: cases should have been exhaustive")}copyToClipboard(){this.chromeService.copySelectorToClipboard(this.selector.selector)}preventClick(e){e.preventDefault(),e.stopPropagation()}copySelectorToEvaluationBox(){this.store.dispatch(n.setCopiedSelector,this.selector)}highlightElements(){this.chromeService.highlightElements(this.selector)}unhighlightElements(){this.chromeService.unhighlightElements()}sendToApp(){this.sendSelector({selector:this.selector})}};__decorate([i.bindable(),__metadata("design:type",String)],a.prototype,"appConnection",void 0),__decorate([i.bindable(),__metadata("design:type",Object)],a.prototype,"selector",void 0),__decorate([i.bindable(),__metadata("design:type",Function)],a.prototype,"sendSelector",void 0),__decorate([i.bindable(),__metadata("design:type",String)],a.prototype,"activeLanguage",void 0),__decorate([i.bindable(),__metadata("design:type",Object)],a.prototype,"element",void 0),a=__decorate([i.autoinject(),__metadata("design:paramtypes",[o.Store,r.ChromeService])],a),t.SelectorListItem=a});__decorate=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter=this&&this.__awaiter||function(e,t,i,o){return new(i||(i=Promise))(function(n,r){function a(e){try{c(o.next(e))}catch(e){r(e)}}function s(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){e.done?n(e.value):new i(function(t){t(e.value)}).then(a,s)}c((o=o.apply(e,t||[])).next())})};define("selector-generator/selector-list",["require","exports","aurelia-framework","aurelia-store","../data/actions/playground","../data/app-service","../data/chrome-service"],function(e,t,i,o,n,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=class{constructor(e,t,i){this.store=e,this.chromeService=t,this.appService=i,this.showContextMenu=!1}setNotificationSettings(e){this.notificationSettings=e}openContextMenu(e,t){this.clickedSelector=t,this.showContextMenu=!0,e.clientX+this.rxContextMenu.clientWidth>window.document.body.offsetWidth?this.rxContextMenu.style.left=e.clientX-this.rxContextMenu.clientWidth+"px":this.rxContextMenu.style.left=e.clientX+"px",this.rxContextMenu.style.top=e.clientY+"px",this.mouseClickEvent=(e=>{const t=e.target;this.rxContextMenu&&(t===this.rxContextMenu||this.rxContextMenu.contains(t))||this.hideContextMenu()}),window.addEventListener("click",this.mouseClickEvent,!0)}copy(){this.hideContextMenu(),this.chromeService.copySelectorToClipboard(this.clickedSelector.selector)}modify(){this.hideContextMenu(),this.store.dispatch(n.setCopiedSelector,this.clickedSelector)}sendToApp(){return __awaiter(this,void 0,void 0,function*(){if("rxpath"===this.clickedSelector.strategy)return!1;this.hideContextMenu(),yield this.sendSelectorToApp(this.clickedSelector)})}sendSelectorToApp(e){return __awaiter(this,void 0,void 0,function*(){try{e.elementFilePath=this.element?this.element.path:void 0,e.name=this.element?this.element.name:e.name,yield this.appService.sendSelectorToApp(e),this.setNotificationSettings({description:`‘${e.name}’ has been added to the active Page Object file.`,icon:"images/icons/success-icon.svg",title:"Selector sent successfully"})}catch(e){this.setNotificationSettings({description:e,icon:"images/icons/fail-icon.svg",title:"Sending selector failed"})}})}hideContextMenu(){this.showContextMenu=!1,this.mouseClickEvent&&window.removeEventListener("click",this.mouseClickEvent,!0)}};__decorate([i.bindable(),__metadata("design:type",Object)],s.prototype,"activeSelectors",void 0),__decorate([i.bindable(),__metadata("design:type",Object)],s.prototype,"appConnection",void 0),__decorate([i.bindable(),__metadata("design:type",Object)],s.prototype,"toggleSelectorState",void 0),__decorate([i.bindable(),__metadata("design:type",Object)],s.prototype,"hideSelectorList",void 0),__decorate([i.bindable(),__metadata("design:type",String)],s.prototype,"activeLanguage",void 0),__decorate([i.bindable(),__metadata("design:type",Object)],s.prototype,"element",void 0),s=__decorate([i.autoinject(),__metadata("design:paramtypes",[o.Store,a.ChromeService,r.AppService])],s),t.SelectorList=s});__decorate=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter=this&&this.__awaiter||function(e,t,i,o){return new(i||(i=Promise))(function(n,r){function a(e){try{c(o.next(e))}catch(e){r(e)}}function s(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){e.done?n(e.value):new i(function(t){t(e.value)}).then(a,s)}c((o=o.apply(e,t||[])).next())})};define("status-bar/status-bar",["require","exports","aurelia-framework","../data/app-service","../data/chrome-service"],function(e,t,i,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=class{constructor(e,t){this.appService=e,this.chromeService=t,this.showReconnect=!1,this.showReconnect=!0}connectOrDisconnectToApp(e){return __awaiter(this,void 0,void 0,function*(){if("disconnected"!==e)this.appService.disconnectFromApp();else{try{yield this.chromeService.askForNotificationPermissions()}catch(e){}this.appService.reconnectToApp()}})}};__decorate([i.bindable(),__metadata("design:type",Object)],r.prototype,"appConnection",void 0),r=__decorate([i.autoinject(),__metadata("design:paramtypes",[o.AppService,n.ChromeService])],r),t.StatusBar=r}),define("ui-tools/key-codes",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.ArrowUp=38]="ArrowUp",e[e.ArrowDown=40]="ArrowDown",e[e.Enter=13]="Enter",e[e.Escape=27]="Escape",e[e.Tab=9]="Tab"}(t.KeyCodes||(t.KeyCodes={}))}),define("ui-tools/sort-value-converter",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SortValueConverter=class{toView(e,t){if((t=t||{}).property=t.property||"value",t.direction=t.direction||"asc",t.numeric=t.numeric||!0,"asc"!==t.direction&&"desc"!==t.direction)throw new Error(`'${t.direction}' is not possible order direction`);return e.sort((e,i)=>{const o="asc"!==t.direction.toLowerCase()?i:e,n="asc"!==t.direction.toLowerCase()?e:i;if(!o[t.property]&&0!==o[t.property]||!n[t.property]&&0!==n[t.property])throw new Error(`Missing property '${t.property}'`);return t.numeric?o[t.property]-n[t.property]:o[t.property]>n[t.property]})}}}),define("util/math",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clamp=function(e,t,i){return e<t?t:e>i?i:e}});__awaiter=this&&this.__awaiter||function(e,t,i,o){return new(i||(i=Promise))(function(n,r){function a(e){try{c(o.next(e))}catch(e){r(e)}}function s(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){e.done?n(e.value):new i(function(t){t(e.value)}).then(a,s)}c((o=o.apply(e,t||[])).next())})};define("util/retry",["require","exports"],function(e,t){"use strict";function i(e){return new Promise(t=>setTimeout(t,e))}Object.defineProperty(t,"__esModule",{value:!0}),t.waitFor=i,t.retry=function(e,t,o){return __awaiter(this,void 0,void 0,function*(){if(e<0)throw new Error("retryCount must not be negative");if(t<0)throw new Error("waitTime must be positive");let n=new Error;do{try{return yield o()}catch(e){n=e}e&&(yield i(t))}while(e--);throw n})}});__decorate=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("custom-elements/configuration-panel/configuration-panel",["require","exports","aurelia-framework"],function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let o=class{constructor(){this.showConfigurationBody=!1}toggleConfigurationBody(){this.showConfigurationBody=!this.showConfigurationBody}};__decorate([i.bindable(),__metadata("design:type",Boolean)],o.prototype,"isDebugMode",void 0),o=__decorate([i.autoinject()],o),t.ConfigurationPanel=o});__decorate=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("custom-elements/dialogs/confirm",["require","exports","aurelia-dialog","aurelia-framework"],function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=class{constructor(e){this.controller=e}attached(){const e=document.querySelector("ux-dialog-overlay");e&&e.classList.add("confirm-dialog")}activate(e){this.settings=e}};n=__decorate([o.autoinject(),__metadata("design:paramtypes",[i.DialogController])],n),t.ConfirmDialog=n}),define("custom-elements/dialogs/dialogs",["require","exports","../../data/store-utils","./confirm"],function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showConfirmDialog=function(e,t){return new Promise(n=>{const r=i.assign({cancelable:!0,message:"",options:[{value:"ok",label:"Ok"}],title:"Warning"},t);e.open({model:r,viewModel:o.ConfirmDialog,keyboard:["Enter"]}).whenClosed(e=>{n(e)})})}});__decorate=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("custom-elements/dropdown-box/dropdown-box",["require","exports","aurelia-framework"],function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let o=class{constructor(){}selectedValueChanged(e){this.updated&&this.updated({newValue:e})}};__decorate([i.bindable(),__metadata("design:type",Boolean)],o.prototype,"disabled",void 0),__decorate([i.bindable(),__metadata("design:type",Array)],o.prototype,"options",void 0),__decorate([i.bindable(),__metadata("design:type",String)],o.prototype,"selectedValue",void 0),__decorate([i.bindable(),__metadata("design:type",Function)],o.prototype,"updated",void 0),o=__decorate([i.autoinject(),__metadata("design:paramtypes",[])],o),t.DropdownBox=o});__decorate=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("custom-elements/editable-text-field/editable-text-field",["require","exports","aurelia-framework","rxjs","rxjs/operators"],function(e,t,i,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=class{constructor(e){this.taskQueue=e,this.inEdit=!1}bind(){this.originalValue=this.value}enterEditMode(e){e.stopPropagation(),this.originalValue=this.value,this.inEdit=!0,this.taskQueue.queueTask(()=>{this.editField.focus(),this.editField.select()})}attached(){this.streamSubscription=o.merge(o.fromEvent(this.editField,"keydown"),o.fromEvent(this.editField,"blur")).pipe(n.startWith(null),n.pairwise()).subscribe(e=>{const t=[9,13],i=[27];if(e[1]instanceof KeyboardEvent){const o=e[1];-1!==t.indexOf(o.keyCode)?this.acceptChange():-1!==i.indexOf(o.keyCode)&&(o.stopPropagation(),this.discardChange())}else if(e[1]instanceof FocusEvent){const o=e[0];(null===o||o instanceof FocusEvent||o instanceof KeyboardEvent&&-1===t.indexOf(o.keyCode)&&-1===i.indexOf(o.keyCode))&&this.acceptChange()}})}detached(){this.streamSubscription.unsubscribe()}acceptChange(){this.inEdit=!1,this.accept&&this.accept({newValue:this.value})}discardChange(){this.inEdit=!1,this.value=this.originalValue,this.discard&&this.discard()}};__decorate([i.bindable(),__metadata("design:type",Function)],r.prototype,"accept",void 0),__decorate([i.bindable(),__metadata("design:type",Function)],r.prototype,"discard",void 0),__decorate([i.bindable(),__metadata("design:type",Object)],r.prototype,"value",void 0),r=__decorate([i.autoinject(),__metadata("design:paramtypes",[i.TaskQueue])],r),t.EditableTextField=r});__decorate=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("custom-elements/labeled-checkbox/labeled-checkbox",["require","exports","aurelia-framework"],function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let o=class{constructor(e=!1){this.checked=e}checkedChanged(e){this.updated&&this.updated({newValue:e})}};__decorate([i.bindable(),__metadata("design:type",Object)],o.prototype,"checked",void 0),__decorate([i.bindable(),__metadata("design:type",Function)],o.prototype,"updated",void 0),o=__decorate([i.autoinject(),__metadata("design:paramtypes",[Object])],o),t.LabeledCheckbox=o});__decorate=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("custom-elements/notification-box/notification-box",["require","exports","aurelia-framework"],function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let o=class{constructor(){this.show=!1}settingsChanged(e){this.show=!0,setTimeout(()=>{this.show=!1},e.duration?e.duration:3500)}};__decorate([i.bindable(),__metadata("design:type",Object)],o.prototype,"settings",void 0),o=__decorate([i.autoinject(),__metadata("design:paramtypes",[])],o),t.NotificationBox=o});__decorate=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};define("custom-elements/tree-outline/tree-outline-item",["require","exports","aurelia-framework"],function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let o=class{};__decorate([i.bindable(),__metadata("design:type",String)],o.prototype,"modifiers",void 0),__decorate([i.bindable(),__metadata("design:type",Number)],o.prototype,"index",void 0),__decorate([i.bindable(),__metadata("design:type",Function)],o.prototype,"handleClick",void 0),o=__decorate([i.containerless()],o),t.TreeOutlineItem=o}),define("custom-elements/tree-outline/tree-outline",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TreeOutline=class{}});__awaiter=this&&this.__awaiter||function(e,t,i,o){return new(i||(i=Promise))(function(n,r){function a(e){try{c(o.next(e))}catch(e){r(e)}}function s(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){e.done?n(e.value):new i(function(t){t(e.value)}).then(a,s)}c((o=o.apply(e,t||[])).next())})};define("data/actions/app-state",["require","exports","../store-utils","./playground"],function(e,t,i,o){"use strict";function n(e,t){return i.shallowClone(e,{contentScriptAvailable:t})}function r(e,t,o){return __awaiter(this,void 0,void 0,function*(){yield o.sendMessageToBackground("connection-state-changed",t);const n="connected"===t?e.appCapabilities:void 0;return i.shallowClone(e,{appCapabilities:n,appConnection:t})})}function a(e,t){return __awaiter(this,void 0,void 0,function*(){return i.shallowClone(e,{appCapabilities:t})})}function s(e,o){return __awaiter(this,void 0,void 0,function*(){const n=i.shallowClone(e.mainConfig,{bannerDismissed:t.CURRENT_BANNER_ID});return yield o.persist("mainConfig",n),i.shallowClone(e,{mainConfig:n})})}function c(e,t,o){return __awaiter(this,void 0,void 0,function*(){!1===t.enableHighlighting&&o.unhighlightElements(!0);const n=i.shallowClone(e.mainConfig,t);yield o.persist("mainConfig",n);let r=[];return(yield o.isPageSupported())&&(r=yield o.buildSelectors()),i.shallowClone(e,{activeSelectors:r,mainConfig:n})})}function l(e,t){return __awaiter(this,void 0,void 0,function*(){return i.shallowClone(e,t)})}function d(e,t){return __awaiter(this,void 0,void 0,function*(){return i.shallowClone(e,{currentElement:t,playground:t?i.shallowClone(e.playground,{elementFilePath:t.path,selector:t.selectors}):i.shallowClone(e.playground,{elementFilePath:void 0,selector:""})})})}function u(e,t,i){return __awaiter(this,void 0,void 0,function*(){const n=yield d(e,i);return yield o.inspectFirstMatchingElement(n,t)})}Object.defineProperty(t,"__esModule",{value:!0}),t.CURRENT_BANNER_ID="open-beta",t.setContentScriptAvailable=n,t.setAppConnectionState=r,t.setAppConnectionCapabilities=a,t.dismissBanner=s,t.updateMainConfig=c,t.setState=l,t.setCurrentElement=d,t.setReceivedElement=u,i.registerToStore(n,r,a,s,c,l,d,u)}),define("data/actions/history",["require","exports","../../util/math","../store-utils"],function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=1e4;function r(e,t){const i=[...e.playground.history];i.push({value:t}),i.length>n&&i.shift();const{currentHistoryIndex:r,selector:a}=l(i,i.length-1);return o.shallowClone(e,{playground:o.shallowClone(e.playground,{currentHistoryIndex:r,history:i,selector:a})})}function a(e){const t=e.playground;if(null===t.currentHistoryIndex)return e;const i=l(t.history,t.history.length-1);return o.shallowClone(e,{playground:o.shallowClone(t,i)})}function s(e){const t=e.playground,i=0!==t.history.length?l(t.history,(t.currentHistoryIndex||0)+1):{currentHistoryIndex:null};return o.shallowClone(e,{playground:o.shallowClone(t,i)})}function c(e){const t=e.playground,i=0!==t.history.length?l(t.history,(t.currentHistoryIndex||0)-1):{currentHistoryIndex:null};return o.shallowClone(e,{playground:o.shallowClone(t,i)})}function l(e,t){const o=i.clamp(t,0,e.length-1);return{currentHistoryIndex:o,selector:e[o].value}}t.saveHistoryItem=r,t.goToLastHistoryItem=a,t.goForwardInHistory=s,t.goBackInHistory=c,o.registerToStore(r,s,c,a)});__awaiter=this&&this.__awaiter||function(e,t,i,o){return new(i||(i=Promise))(function(n,r){function a(e){try{c(o.next(e))}catch(e){r(e)}}function s(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){e.done?n(e.value):new i(function(t){t(e.value)}).then(a,s)}c((o=o.apply(e,t||[])).next())})};define("data/actions/playground",["require","exports","../../util/retry","../state-models","../store-utils"],function(e,t,i,o,n){"use strict";function r(e,t){return c(e,{selectorOptions:t})}function a(e,t){return c(e,{selector:t.selector,selectorState:"focused"})}function s(e,t){return c(e,{selector:t.selector,selectorState:"inspected"})}function c(e,t){return n.shallowClone(e,{playground:n.shallowClone(e.playground,t)})}function l(e,t){return __awaiter(this,void 0,void 0,function*(){return t.focus(),yield i.waitFor(10),n.shallowClone(e,{playground:n.shallowClone(e.playground,{selectorState:"focused"})})})}function d(e,t){return __awaiter(this,void 0,void 0,function*(){const{selector:i,forcedStrategy:o}=e.playground;return yield h(e,i,o||null,0,t)})}function u(e,t){return __awaiter(this,void 0,void 0,function*(){const{selector:i,forcedStrategy:o,currentElementIndex:n}=e.playground;return yield h(e,i,o||null,(n||0)+1,t)})}function p(e,t){return __awaiter(this,void 0,void 0,function*(){const{selector:i,forcedStrategy:o,currentElementIndex:n}=e.playground;return yield h(e,i,o||null,(n||0)-1,t)})}function h(e,t,i,r,a){return __awaiter(this,void 0,void 0,function*(){const s=yield a.autoEvaluateSelector(t,i===o.autoDetectValue?void 0:i||void 0,r),c=[...e.playground.selectorOptions],l=c.findIndex(e=>e.value===o.autoDetectValue);return-1!==l&&(i===o.autoDetectValue&&s&&s.selectorName?c.splice(l,1,n.shallowClone(c[l],{label:`${s.selectorName} (detected)`})):c.splice(l,1,n.shallowClone(c[l],{label:o.defaultAutoDetectLabel}))),n.shallowClone(e,{playground:n.shallowClone(e.playground,{currentElementIndex:s.inspectIndex,forcedStrategy:i,foundStrategy:s.selectorName,numberOfFoundElements:s.length,selector:t,selectorOptions:c,selectorState:"focusing"})})})}Object.defineProperty(t,"__esModule",{value:!0}),t.updateSelectorOptions=r,t.setCopiedSelector=a,t.inspectBySelector=s,t.updatePlaygroundState=c,t.focusing=l,t.inspectFirstMatchingElement=d,t.inspectNextMatchingElement=u,t.inspectPreviousMatchingElement=p,n.registerToStore(r,a,s,c,l,d,u,p)}),define("data/actions/selectors",["require","exports","../store-utils"],function(e,t,i){"use strict";function o(e,t){const o=[...e.activeSelectors],n=o.findIndex(e=>e===t);return-1===n?e:(o.splice(n,1,i.shallowClone(o[n],{listView:i.shallowClone(o[n].listView,{expanded:!o[n].listView.expanded})})),i.shallowClone(e,{activeSelectors:o}))}function n(e,t,o){const n=[...e.activeSelectors],r=n.findIndex(e=>e===t);return-1===r?e:(n.splice(r,1,i.shallowClone(n[r],{selector:o})),i.shallowClone(e,{activeSelectors:n}))}function r(e,t){return i.shallowClone(e,{activeSelectors:t})}Object.defineProperty(t,"__esModule",{value:!0}),t.toggleSelectorState=o,t.updateSelector=n,t.setActiveSelectors=r,i.registerToStore(o,n,r)}),define("../../shared/connectivity-capabilities",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkExtensionCapabilities=function(e,...t){return e.some(e=>t.every(t=>!!e[t]))}}),define("shared/guid",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.guid=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}),define("shared/index",["require","exports","./guid","./languages"],function(e,t,i,o){"use strict";function n(e){for(var i in e)t.hasOwnProperty(i)||(t[i]=e[i])}Object.defineProperty(t,"__esModule",{value:!0}),n(i),n(o)}),define("../../shared/json-object",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),define("shared/languages",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i={csharp:{alwaysExclude:[],defaultReturnTypes:[{name:"void"},{name:"boolean",default:"false"},{name:"int",default:"0"},{name:"float",default:"0"},{name:"string",default:'""'}],escapeSymbol:'""',excludePatterns:[],fileEndings:["cs"],frameworks:["Selenium"],includePatterns:["**/*",".editorconfig"],isFileNameValid:()=>!0,label:"C#",monacoName:"csharp"},java:{alwaysExclude:[],defaultReturnTypes:[{name:"void"},{name:"boolean",default:"false"},{name:"int",default:"0"},{name:"double",default:"0"},{name:"String",default:'""'}],defaultScripts:{restore:"webtestit restore"},defaultTriggers:{fileSave:[{filter:["pom.xml"],script:"restore"}]},escapeSymbol:'"',excludePatterns:["src/main","target"],fileEndings:["java"],frameworks:["Selenium"],includePatterns:["**/*",".editorconfig","!src/test/resources/*.capabilities","!src/test/resources/*.properties","!.settings","!**/sauce.config.json","!**/WEBTESTIT_README.txt"],isFileNameValid:o,label:"Java",monacoName:"java"},js:{alwaysExclude:["node_modules"],defaultReturnTypes:[{name:"void"},{name:"Boolean",default:"false"},{name:"Number",default:"0"},{name:"String",default:"''"}],escapeSymbol:'"',excludePatterns:["node_modules"],fileEndings:["js","mjs"],frameworks:["WebdriverIO"],includePatterns:["**/*",".editorconfig"],isFileNameValid:n,label:"JavaScript",monacoName:"javascript"},ts:{alwaysExclude:["node_modules"],defaultReturnTypes:[{name:"void"},{name:"boolean",default:"false"},{name:"number",default:"0"},{name:"string",default:'""'}],defaultScripts:{restore:"webtestit restore"},defaultTriggers:{fileSave:[{filter:["package.json"],script:"restore"}]},escapeSymbol:'"',excludePatterns:["node_modules","dist"],fileEndings:["ts","js","mjs"],frameworks:["Protractor"],includePatterns:["**/*",".editorconfig","!temp-reports","!package-lock.json","!**/sauce.config.json","!**/WEBTESTIT_README.txt"],isFileNameValid:n,label:"TypeScript",monacoName:"typescript"}};function o(e){return!(Object.values(["abstract","assert","boolean","break","byte","case","catch","char","class","const","continue","default","do","double","else","enum","extends","false","final","finally","float","for","goto","if","implements","import","instanceof","int","interface","long","native","new","null","package","private","protected","public","return","short","static","strictfp","super","switch","synchronized","this","throw","throws","transient","true","try","void","volatile","while","_"]).indexOf(e)>-1||!1===/^[a-zA-Z][a-zA-Z_$0-9]*(\.[a-zA-Z][a-zA-Z_$0-9]*)*$/.test(e))}function n(e){const t=/^[a-zA-Z][a-zA-Z_$0-9-]*(\.[a-zA-Z][a-zA-Z_$0-9-]*)*$/;return!(Object.values(["break","case","catch","class","const","continue","debugger","default","delete","do","else","enum","export","extends","false","finally","for","function","if","import","in","instanceof","new","null","return","super","switch","this","throw","true","try","typeof","var","void","while","with","undefined","as","implements","interface","let","package","private","protected","public","static","yield","any","boolean","constructor","declare","get","module","require","number","set","string","symbol","type","from","of","namespace","await","abstract","byte","char","double","final","float","goto","int","long","native","short","synchronized","throws","transient","volatile"]).indexOf(e)>-1||!(e=>!("string"!=typeof e||e.trim()!==e||!t.test(e)))(e))}t.languages={java:i.java,ts:i.ts},t.isJavaFileNameValid=o,t.isTypeScriptJavaScriptFileNameValid=n}),define("../../shared/socket-models",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),define("text!app.html",["module"],function(e){e.exports='<template><require from="./selector-generator/selector-list"></require><require from="./playground/playground-main"></require><require from="./status-bar/status-bar"></require><require from="./banner/banner"></require><div class="${isDarkTheme ? \'dark\' : \'\'} app"><selector-list app-connection.bind="state.appConnection" toggle-selector-state.bind="toggleSelectorState" active-selectors.bind="state.activeSelectors" active-language.bind="state.activeLanguage" hide-selector-list.bind="!state.contentScriptAvailable" element.bind="state.currentElement"></selector-list><configuration-panel is-debug-mode.bind="state.isDebugMode"><labeled-checkbox checked.bind="state.mainConfig.copyWithQuotes" updated.call="updateMainConfig({copyWithQuotes:newValue})" title="If checked, copied selectors will be quoted and escaped.">Escape and quote copied selectors</labeled-checkbox><labeled-checkbox checked.bind="state.mainConfig.enableHighlighting" updated.call="updateMainConfig({enableHighlighting:newValue})" title="If checked, matching elements will be highlighted in the DOM.">Element highlighting</labeled-checkbox><labeled-checkbox checked.bind="state.mainConfig.ignoreDynamicIds" updated.call="updateMainConfig({ignoreDynamicIds:newValue})" title="If checked, dynamically generated ID attributes will not be used.">Ignore dynamic ID attributes</labeled-checkbox><labeled-checkbox checked.bind="state.mainConfig.usePartialClassNameMatching" updated.call="updateMainConfig({usePartialClassNameMatching:newValue})" title="Include partial class-names (e.g. \'col-*\')">Allow partial class-names</labeled-checkbox><labeled-checkbox checked.bind="state.mainConfig.leftTrimPaths" updated.call="updateMainConfig({leftTrimPaths:newValue})" title="Remove any steps beginning from the left side, as long as the selector has a unique match.">Produce minimal target selectors</labeled-checkbox></configuration-panel><playground-main data.bind="state.playground" disable-controls.bind="!state.contentScriptAvailable" active-language.bind="state.activeLanguage" active-selectors.bind="state.activeSelectors" app-connection.bind="state.appConnection" element.bind="state.currentElement" is-debug-mode.bind="state.isDebugMode"></playground-main><banner if.bind="!state.isDebugMode"></banner><status-bar app-connection.bind="state.appConnection"></status-bar></div></template>'}),define("text!banner/banner.html",["module"],function(e){e.exports='<template class="banner"><div class="banner__container" if.bind="!isBannerDismissed"><div><div class="banner__title">Accelerate your web test development</div></div><div><p>Integrate Ranorex Selocity with Ranorex Webtestit: a lightweight IDE optimized for building UI web tests.</p><p class="banner__logo-container"><a target="_blank" href="https://www.ranorex.com/webtestit/beta?utm_source=selocity&utm_medium=display&utm_campaign=selocity-banner_webtestit-beta">Join the open beta now. </a><a class="banner__logo" target="_blank" href="https://www.ranorex.com/webtestit/beta?utm_source=selocity&utm_medium=display&utm_campaign=selocity-banner_webtestit-beta"><img src="${isDarkTheme ? \'/images/logo/webtestit-full-light.svg\' : \'/images/logo/webtestit-full.svg\'}" alt="Webtestit logo"></a></p></div><a href="#" class="banner__dismiss" click.delegate="dismissBanner()">Dismiss</a></div></template>'}),define("text!playground/element-edit.html",["module"],function(e){e.exports='<template class="element-edit"><div class="element-edit__container"><img class="element-edit__icon" src="../../images/icons/icon-element.svg"> <span class="element-edit__name">${element.name}</span><a href="#" class="element-edit__cancel" click.delegate="removeElement()"><div>Cancel</div></a></div></template>'}),define("text!playground/evaluation-box.html",["module"],function(e){e.exports='<template class="evaluation-box"><div class="evaluation-box__controls"><dropdown-box class="toolbar-item" disabled.bind="disableControls" options.bind="selector.selectorOptions" updated.call="setForcedStrategy(newValue)" selected-value.bind="selector.forcedStrategy" title="Specify which selector evaluator to use"></dropdown-box><div class="evaluation-box__control-divider"></div><span class="evaluation-box__history"><button disabled.bind="selector.currentHistoryIndex === null || disableControls || (!selector.currentHistoryIndex && !currentHistoryItemIsModified(selector.selector, selector.currentHistoryIndex, selector.history))" class="evaluation-box__btn-history-back" click.delegate="historyGoBack()" title="Go back"></button> <button disabled.bind="selector.currentHistoryIndex === null || disableControls || (selector.currentHistoryIndex === selector.history.length - 1) || currentHistoryItemIsModified(selector.selector, selector.currentHistoryIndex, selector.history)" class="evaluation-box__btn-history-forward" click.delegate="historyGoForward()" title="Go forward"></button></span><div class="evaluation-box__control-divider"></div><button class="evaluation-box__btn-copy" click.delegate="copyValueToClipboard()" disabled.bind="!selector.selector || selector.selector.length <= 0 || disableControls" title="Copy selector to clipboard"></button> <button class="evaluation-box__send-to-app" click.delegate="sendSelectorToApp(selector)" disabled.bind="!canSendPlaygroundSelectorToApp" title="${appConnection !== \'connected\' ? \'Not connected to Ranorex Webtestit\' : selector.foundStrategy === \'rxpath\' ? \'RxPath is not yet supported\' : \'Send selector to Ranorex Webtestit\'}"></button><div class="evaluation-box__control-divider"></div><span class="evaluation-box__count"><button disabled.bind="selector.numberOfFoundElements <= 1 || disableControls" class="evaluation-box__btn-cycle-up" click.delegate="inspectNext()" title="Next element"></button> <span class="evaluation-box__current ${getCountModifier(selector.numberOfFoundElements, selector ? selector.selector : undefined)}" title="Number of elements found"> ${(selector.numberOfFoundElements > 0 ? ((selector.currentElementIndex + 1)+"/") : "")}${selector.numberOfFoundElements} </span><button disabled.bind="selector.numberOfFoundElements <= 1 || disableControls" class="evaluation-box__btn-cycle-down" click.delegate="inspectPrevious()" title="Previous element"></button><div class="evaluation-box__control-label">Found:</div></span></div><div class="toolbar-input toolbar-item evaluation-box__input-wrapper"><input type="search" class="evaluation-box__input" disabled.bind="disableControls" keyup.trigger="onKeyUp($event)" value.bind="selector.selector" placeholder="Enter selector" focus.bind="inputHasFocus" ref="evaluationBoxInput" click.trigger="handleXButton($event)" spellcheck="false"><div class="evaluation-box__input-divider">&nbsp;</div><button class="evaluation-box__btn-submit ${getSubmitActiveModifier(selector.selector, disableControls)}" disabled.bind="disableControls" title="Test selector" click.trigger="submitButton()"></button></div><notification-box settings.bind="notificationSettings"></notification-box><div class="evaluation-box__horizontal-divider"></div></template>'}),define("text!playground/playground-main.html",["module"],function(e){e.exports='<template class="playground-main"><require from="./evaluation-box"></require><require from="./element-edit"></require><div class="playground-main__title">Modify and test selector</div><p hidden.bind="isDebugMode" class="playground-main__description">Enter your selector, modify it, and hit enter to test it.</p><p hidden.bind="!isDebugMode" class="playground-main__description">Modify it, test it and send the updated selector directly back to Ranorex Webtestit.</p><element-edit hidden.bind="!element" element.bind="element"></element-edit><evaluation-box class="playground-main__evaluation-box" selector.bind="data" disable-controls.bind="disableControls" active-language.bind="activeLanguage" active-selectors.bind="activeSelectors" app-connection.bind="appConnection" element.bind="element"></evaluation-box></template>'}),define("text!selector-generator/selector-list-item.html",["module"],function(e){e.exports='<template class="selector" mouseleave.trigger="unhighlightElements()" mouseenter.trigger="highlightElements()"><div class="selection fill"></div><div class="selector-list__selector-item selector-item" mouseleave.trigger="unhighlightElements()" mouseenter.trigger="highlightElements()"><span class="selector-item__selector monospace" title="${selector.selector}"> ${selector.selector} </span><span class="selector-item__type monospace">${selector.strategy}</span><span class="selector-item__score ${countColorClass(selector.matchingElements)} monospace" title="Total number of found elements">${selector.matchingElements || 0}</span><span class="selector-item__commands" click.delegate="preventClick($event)"><button class="selector-item__edit" title="Modify selector" click.delegate="copySelectorToEvaluationBox()"></button> <button class="selector-item__copy" title="Copy selector to clipboard" click.delegate="copyToClipboard()"></button> <button disabled.bind="appConnection !== \'connected\' || selector.strategy === \'rxpath\'" class="selector-item__send-to-app" title="${appConnection !== \'connected\' ? \'Not connected to Ranorex Webtestit\' : selector.strategy === \'rxpath\' ? \'RxPath is not yet supported\' : \'Send selector to Ranorex Webtestit\'}" click.delegate="sendToApp()"></button></span></div><div class="selector-item__expandable-area monospace" if.bind="selector.listView.expanded"> ${selector.selector} </div></template>'}),define("text!selector-generator/selector-list.html",["module"],function(e){e.exports='<template class="selector-list"><require from="./selector-list-item"></require><require from="../ui-tools/sort-value-converter"></require><div class="selector-list__title">List of selectors</div><p class="selector-list__description">Suggested selectors for the element.</p><tree-outline if.bind="!hideSelectorList && activeSelectors && activeSelectors.length > 0"><tree-outline-item modifiers="${selector.listView.expanded ? \'expanded selector-item--details-open\' : \'\'}" handle-click.call="toggleSelectorState(selector)" repeat.for="selector of activeSelectors | sort: { property: \'matchingElements\', direction: \'asc\',  numeric: true }" index.bind="$index"><selector-list-item app-connection.bind="appConnection" active-language.bind="activeLanguage" selector.bind="selector" send-selector.call="sendSelectorToApp(selector)" contextmenu.trigger="openContextMenu($event, selector)" element.bind="element"></selector-list-item></tree-outline-item></tree-outline><div class="selector-list__notice" if.bind="!hideSelectorList && (!activeSelectors || !activeSelectors.length)">No selectors found. Ranorex Selocity could not generate selectors for this element.</div><div class="selector-list__notice" if.bind="hideSelectorList">The page you are viewing may still be loading, or Ranorex Selocity can not access it. Chrome internal pages are not supported.</div><div ref="rxContextMenu" class="rx-context-menu"><ul if.bind="showContextMenu"><li click.trigger="copy()"><span class="copy-icon"></span> <span class="context-menu-font">Copy selector</span></li><li click.trigger="modify()"><span class="edit-icon"></span> <span class="context-menu-font">Modify selector</span></li><li class="${appConnection !== \'connected\' || clickedSelector.strategy === \'rxpath\' ? \'menuitem-disabled\' : \'\'}" click.trigger="sendToApp()"><span class="send-icon"></span> <span title="${appConnection !== \'connected\' ? \'Not connected to Ranorex Webtestit\' : clickedSelector.strategy === \'rxpath\' ? \'RxPath is not yet supported\' : \'\'}" class="context-menu-font">Send selector to Ranorex Webtestit</span></li></ul></div><notification-box settings.bind="notificationSettings"></notification-box></template>'}),define("text!status-bar/status-bar.html",["module"],function(e){e.exports="<template class=\"status-bar\"><div class=\"status-bar__container\" if.bind=\"showReconnect\"><div class=\"status-bar__connection status-bar__connection--${appConnection === 'connecting' ? 'connecting' : appConnection === 'disconnected' ? 'disconnected' : 'connected'}\"><div class=\"status-bar__${appConnection === 'connecting' ? 'connecting' : appConnection === 'disconnected' ? 'disconnected' : 'connected'}\"></div><div class=\"status-bar__connection-text\"> ${appConnection === 'connecting' ? 'Connecting' : appConnection === 'disconnected' ? 'Disconnected from ' : 'Connected to'} <a target=\"_blank\" href=\"https://www.ranorex.com/webtestit/beta?utm_source=selocity&utm_medium=display&utm_campaign=selocity-banner_webtestit-beta\">Ranorex Webtestit</a></div><div class=\"status-bar__connection-button\"><button click.trigger=\"connectOrDisconnectToApp(appConnection)\"> ${appConnection === 'disconnected' ? 'Connect' : appConnection === 'connecting' ? 'Cancel' : 'Disconnect'} </button></div></div></div></template>"}),define("text!custom-elements/configuration-panel/configuration-panel.html",["module"],function(e){e.exports='<template class="configuration-panel"><div class="configuration-panel__header ${isDebugMode ? \'configuration-panel__header-debug\' : \'\'}"><div class="configuration-panel__header-item-link-text"><a href="https://www.ranorex.com/selocity/browser-extension.html?utm_source=selocity-browser-extension&utm_medium=referral&utm_campaign=en_help#c17363" target="_blank"><div>Ranorex Selocity help</div></a></div><div class="configuration-panel__header-divider"></div><button class="configuration-panel__header-item-button ${ showConfigurationBody ? \'expanded\': \'\'}" click.delegate="toggleConfigurationBody()" title="Settings"></button></div><div class="configuration-panel__body" show.bind="showConfigurationBody"><slot></slot></div></template>'}),define("text!custom-elements/dialogs/confirm.html",["module"],function(e){e.exports='<template><ux-dialog class="confirm" trap-focus><ux-dialog-head class="confirm__head"><ux-dialog-header class="confirm__header"><p class="confirm__title"> ${settings.title} </p></ux-dialog-header></ux-dialog-head><ux-dialog-body class="confirm__body"><div class="confirm__message" innerhtml.bind="settings.message"></div></ux-dialog-body><ux-dialog-footer class="confirm__footer"><button attach-focus="true" class="confirm__footer-btn confirm__footer-btn-${option.value}" click.trigger="controller.ok({value: option.value})" repeat.for="option of settings.options">${option.label}</button> <button class="confirm__footer-btn confirm__footer-btn-cancel" click.trigger="controller.cancel()" if.bind="settings.cancelable">Cancel</button></ux-dialog-footer></ux-dialog></template>'}),define("text!custom-elements/dropdown-box/dropdown-box.html",["module"],function(e){e.exports='<template><select class="dropdown-box" value.bind="selectedValue" disabled.bind="disabled"><option repeat.for="option of options" value.bind="option.value" label="${option.label}"></option></select></template>'}),define("text!custom-elements/editable-text-field/editable-text-field.html",["module"],function(e){e.exports='<template class="editable-text-field"><input show.bind="inEdit" ref="editField" class="editable-text-field__input" value.bind="value" tabindex="1"> <span show.bind="!inEdit" class="editable-text-field__label" click.delegate="enterEditMode($event)">${value}</span></template>'}),define("text!custom-elements/labeled-checkbox/labeled-checkbox.html",["module"],function(e){e.exports='<template><div class="toolbar-shadow vertical"><label class="toolbar-item checkbox"><input type="checkbox" class="checkbox-input" checked.bind="checked"><div class="dt-checkbox-text"><slot></slot></div></label></div></template>'}),define("text!custom-elements/notification-box/notification-box.html",["module"],function(e){e.exports='<template><div class="notification" if.bind="show"><img class="notification__icon" src.bind="settings.icon" alt="Notification icon"><div class="notification__title">${settings.title}</div><div class="notification__description"> ${settings.description} </div></div></template>'}),define("text!custom-elements/tree-outline/tree-outline-item.html",["module"],function(e){e.exports='<template><li click.delegate="handleClick(e)" role="treeitem" class="parent ${!(index % 2) ? \'odd-row\' : \'\'} ${modifiers}"><slot></slot></li></template>'}),define("text!custom-elements/tree-outline/tree-outline.html",["module"],function(e){e.exports='<template><ol class="tree-outline"><slot></slot></ol></template>'});